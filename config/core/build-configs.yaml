# This is LEGACY system config, do not send any new patches for this file.
# More details:
# https://lore.kernel.org/kernelci/5b603b8f-c9b2-4148-7212-dd69a3fdf506@collabora.com/T/#u

trees:

  agross:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux.git"

  alex:
    url: "https://git.linaro.org/people/alex.bennee/linux.git"

  amlogic:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/amlogic/linux.git"

  ardb:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/ardb/linux.git"

  arm64:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/arm64/linux.git"

  arnd:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/arnd/playground.git"

  broonie-misc:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/misc.git"

  broonie-regmap:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/regmap.git"

  broonie-regulator:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/regulator.git"

  broonie-sound:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/sound.git"

  broonie-spi:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/spi.git"

  chrome-platform:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/chrome-platform/linux.git"

  clk:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/clk/linux.git"

  efi:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/efi/efi.git"

  evalenti:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/evalenti/linux-soc-thermal.git"

  gtucker:
    url: 'https://gitlab.collabora.com/gtucker/linux.git'

  khilman:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/khilman/linux.git"

  krzysztof:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/krzk/linux.git"

  kselftest:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/shuah/linux-kselftest.git'

  lee-backlight:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/lee/backlight.git"

  lee-mfd:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/lee/mfd.git"

  linusw:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio.git/"

  mainline:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git'

  media:
    url: "https://git.linuxtv.org/media_tree.git"

  mediatek:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/mediatek/linux.git'

  net-next:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net-next.git"

  next:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git'

  omap:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/tmlind/linux-omap.git"

  peterz:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/peterz/queue.git"

  pm:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm.git"

  pmwg:
    url: "https://git.linaro.org/power/linux.git"

  qcom-lt:
    url: "https://git.codelinaro.org/linaro/qcomlt/kernel"

  renesas:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/geert/renesas-devel.git"

  riscv:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/riscv/linux.git"

  rmk:
    url: "git://git.armlinux.org.uk/~rmk/linux-arm.git"

  robh:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/robh/linux.git"

  rppt:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/rppt/memblock.git/"

  rt-stable:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/rt/linux-stable-rt.git"

  rust-for-linux:
    url: "https://github.com/Rust-for-Linux/linux.git"

  samsung:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/kgene/linux-samsung.git"

  soc:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/soc/soc.git"

  tegra:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/tegra/linux.git"

  thermal:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/thermal/linux.git"

  tip:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/tip/tip.git"

  ulfh:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/ulfh/mmc.git"

  vireshk:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/vireshk/linux.git"

  weiny2:
    url: "https://github.com/weiny2/linux-kernel"


fragments:

  amdgpu:
    path: "kernel/configs/amdgpu.config"
    configs:
      - 'CONFIG_DRM_AMDGPU=y'
      - 'CONFIG_DRM_AMDGPU_USERPTR=y'

  arm64-chromebook:
    path: "kernel/configs/arm64-chromebook.config"
    configs:
      - 'CONFIG_NFS_FS=y'
      - 'CONFIG_NFS_V2=y'
      - 'CONFIG_NFS_V3=y'
      - 'CONFIG_NFS_V3_ACL=y'
      - 'CONFIG_NFS_V4=y'
      - 'CONFIG_ROOT_NFS=y'
      - 'CONFIG_REGULATOR_DA9211=y'
      - 'CONFIG_ARM_MEDIATEK_CPUFREQ=y'
      - 'CONFIG_RTC_DRV_MT6397=y'
      # This is required for sc7180-trogdor-lazor-limozeen and it hasn't been
      # merged upstream yet.
      - 'CONFIG_INTERCONNECT_QCOM_SC7180=y'
      - 'CONFIG_SC_DISPCC_7180=y'
      - 'CONFIG_SC_GPUCC_7180=y'
      - 'CONFIG_SC_LPASS_CORECC_7180=y'
      - 'CONFIG_SC_VIDEOCC_7180=y'
      - 'CONFIG_SC_MSS_7180=y'
      - 'CONFIG_SND_SOC_SC7180=y'
      - 'CONFIG_DRM=y'
      - 'CONFIG_DRM_PANEL_SIMPLE=y'
      - 'CONFIG_DRM_PANEL_EDP=y'
      - 'CONFIG_DRM_MSM=y'
      - 'CONFIG_DRM_I2C_ADV7511=y'
      - 'CONFIG_PWM_CROS_EC=y'
      - 'CONFIG_BACKLIGHT_PWM=y'
      - 'CONFIG_RESET_QCOM_PDC=y'
      - 'CONFIG_DRM_TI_SN65DSI86=y'
      - 'CONFIG_I2C_QCOM_GENI=y'
      - 'CONFIG_SPI_QCOM_GENI=y'
      - 'CONFIG_PHY_QCOM_QUSB2=y'
      - 'CONFIG_PHY_QCOM_QMP=y'
      - 'CONFIG_QCOM_CLK_APCC_MSM8996=y'
      - 'CONFIG_QCOM_LLCC=y'
      - 'CONFIG_QCOM_LMH=y'
      - 'CONFIG_QCOM_SPMI_TEMP_ALARM=y'
      - 'CONFIG_QCOM_WDT=y'
      - 'CONFIG_POWER_RESET_QCOM_PON=y'
      - 'CONFIG_USB_ONBOARD_HUB=y'
      - 'CONFIG_BACKLIGHT_GPIO=y'
      - 'CONFIG_BLK_DEV_NVME=y'
      - 'CONFIG_CORESIGHT_SOURCE_ETM4X=m'
      - 'CONFIG_CROS_EC_MKBP_PROXIMITY=m'
      - 'CONFIG_CRYPTO_MICHAEL_MIC=y'
      - 'CONFIG_DRM_PANEL_BOE_TV101WUM_NL6=y'
      - 'CONFIG_DRM_PANEL_SAMSUNG_ATNA33XC20=y'
      - 'CONFIG_DRM_PANEL_VISIONOX_RM69299=y'
      - 'CONFIG_DRM_PARADE_PS8640=y'
      - 'CONFIG_EDAC_QCOM=y'
      - 'CONFIG_I2C_HID_OF_ELAN=y'
      - 'CONFIG_I2C_HID_OF_GOODIX=y'
      - 'CONFIG_I2C_HID_OF=y'
      - 'CONFIG_INTERCONNECT_QCOM_OSM_L3=y'
      - 'CONFIG_LEDS_CLASS_MULTICOLOR=y'
      - 'CONFIG_LEDS_QCOM_LPG=y'
      - 'CONFIG_PCIEASPM_POWER_SUPERSAVE=y'
      - 'CONFIG_PHY_QCOM_EDP=y'
      - 'CONFIG_PHY_QCOM_USB_SNPS_FEMTO_V2=y'
      - 'CONFIG_PINCTRL_LPASS_LPI=y'
      - 'CONFIG_PINCTRL_SC7280_LPASS_LPI=y'
      - 'CONFIG_PM_DEVFREQ_EVENT=y'
      - 'CONFIG_QCOM_IPA=y'
      - 'CONFIG_QCOM_Q6V5_ADSP=y'
      - 'CONFIG_QCOM_Q6V5_MSS=y'
      - 'CONFIG_QCOM_RMTFS_MEM=y'
      - 'CONFIG_QCOM_SOCINFO=y'
      - 'CONFIG_QCOM_SYSMON=y'
      - 'CONFIG_QCOM_WDT=m'
      - 'CONFIG_QRTR_SMD=y'
      - 'CONFIG_QRTR=y'
      - 'CONFIG_RMNET=y'
      - 'CONFIG_RPMSG_CHAR=y'
      - 'CONFIG_RPMSG_QCOM_GLINK_SMEM=y'
      - 'CONFIG_SC_CAMCC_7180=y'
      - 'CONFIG_SCSI_UFS_QCOM=y'
      - 'CONFIG_SECURITY_LOADPIN_VERITY=y'
      - 'CONFIG_SND_SOC_LPASS_VA_MACRO=y'
      - 'CONFIG_SND_SOC_QCOM=y'
      - 'CONFIG_SOUNDWIRE_QCOM=y'
      - 'CONFIG_SOUNDWIRE=y'
      - 'CONFIG_SPI_QCOM_QSPI=y'
      - 'CONFIG_SX9310=m'
      - 'CONFIG_SX9324=m'
      - 'CONFIG_TCG_TIS_I2C_CR50=y'
      - 'CONFIG_QCOM_OCMEM=y'
      # Mediatek specific options start here
      - 'CONFIG_RTC_DRV_PM8XXX=y'
      - 'CONFIG_SND_SOC_MT8183=y'
      - 'CONFIG_SND_SOC_MT8183_MT6358_TS3A227E_MAX98357A=y'
      - 'CONFIG_SND_SOC_TS3A227E=m'
      - 'CONFIG_SPI_MT65XX=y'
      - 'CONFIG_TOUCHSCREEN_ELAN=m'
      - 'CONFIG_MTK_SCP=m'
      - 'CONFIG_VIDEO_MEDIATEK_JPEG=m'
      - 'CONFIG_TCG_TIS=y'
      - 'CONFIG_TCG_TIS_SPI=y'
      - 'CONFIG_TCG_TIS_SPI_CR50=y'
      - 'CONFIG_MEDIATEK_MT6577_AUXADC=m'
      - 'CONFIG_MTK_SVS=m'
      - 'CONFIG_ATH10K_SDIO=m'
      - 'CONFIG_COMMON_CLK_MT8192=y'
      - 'CONFIG_COMMON_CLK_MT8192_AUDSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_CAMSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_IMGSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_IMP_IIC_WRAP=y'
      - 'CONFIG_COMMON_CLK_MT8192_IPESYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_MDPSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_MFGCFG=y'
      - 'CONFIG_COMMON_CLK_MT8192_MMSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_MSDC=y'
      - 'CONFIG_COMMON_CLK_MT8192_SCP_ADSP=y'
      - 'CONFIG_COMMON_CLK_MT8192_VDECSYS=y'
      - 'CONFIG_COMMON_CLK_MT8192_VENCSYS=y'
      - 'CONFIG_REGULATOR_MT6315=y'
      - 'CONFIG_REGULATOR_MT6359=y'
      - 'CONFIG_REGULATOR_MT6360=y'
      - 'CONFIG_DMA_RESTRICTED_POOL=y'
      - 'CONFIG_MEDIATEK_WATCHDOG=y'
      - 'CONFIG_PCIE_MEDIATEK_GEN3=m'
      - 'CONFIG_MT7921E=m'
      - 'CONFIG_CROS_EC_RPMSG=m'
      - 'CONFIG_MOUSE_ELAN_I2C=m'
      - 'CONFIG_SPMI_MTK_PMIF=y'
      - 'CONFIG_VIDEO_MEDIATEK_VCODEC=m'
      - 'CONFIG_BT_HCIBTUSB_MTK=y'
      - 'CONFIG_REGULATOR_CROS_EC=y'
      - 'CONFIG_ARM_MEDIATEK_CPUFREQ_HW=y'
      - 'CONFIG_SND_SOC_MT6359=m'
      - 'CONFIG_SND_DYNAMIC_MINORS=y'
      - 'CONFIG_ARM_MEDIATEK_CCI_DEVFREQ=y'
      - 'CONFIG_ATH10K_TRACING=y'
      - 'CONFIG_BT_HCIUART_RTL=y'
      - 'CONFIG_BT_MTKSDIO=m'
      - 'CONFIG_DRM_ANALOGIX_ANX7625=y'
      - 'CONFIG_DRM_ANALOGIX_ANX78XX=y'
      - 'CONFIG_DRM_ITE_IT6505=y'
      - 'CONFIG_DRM_MEDIATEK_HDMI=y'
      - 'CONFIG_DRM_MEDIATEK=y'
      - 'CONFIG_DRM_PANEL_INNOLUX_HIMAX8279D=y'
      - 'CONFIG_DRM_PANEL_INNOLUX_P079ZCA=y'
      - 'CONFIG_DRM_PANFROST=y'
      - 'CONFIG_EEPROM_AT24=y'
      - 'CONFIG_GENERIC_ADC_THERMAL=y'
      - 'CONFIG_HID_GOOGLE_HAMMER=m'
      - 'CONFIG_IIO_CROS_EC_SENSORS_LID_ANGLE=m'
      - 'CONFIG_MT7921S=m'
      - 'CONFIG_MTK_ADSP_IPC=y'
      - 'CONFIG_MTK_ADSP_MBOX=y'
      - 'CONFIG_MTK_CMDQ=y'
      - 'CONFIG_MTK_SOC_THERMAL_LVTS=y'
      - 'CONFIG_MTK_SOC_THERMAL=y'
      - 'CONFIG_PCIE_MEDIATEK=y'
      - 'CONFIG_PWM_MTK_DISP=y'
      - 'CONFIG_RESET_TI_SYSCON=y'
      - 'CONFIG_RTW88_8822BE=m'
      - 'CONFIG_RTW88_8822CE=m'
      - 'CONFIG_RTW88_DEBUGFS=y'
      - 'CONFIG_RTW88_DEBUG=y'
      - 'CONFIG_RTW88=m'
      - 'CONFIG_SENSORS_TMP401=y'
      - 'CONFIG_SND_SOC_MT8173_RT5650_RT5514=y'
      - 'CONFIG_SND_SOC_MT8173_RT5650_RT5676=y'
      - 'CONFIG_SND_SOC_MT8173_RT5650=y'
      - 'CONFIG_SND_SOC_MT8173=y'
      - 'CONFIG_SND_SOC_MT8183_DA7219_MAX98357A=y'
      - 'CONFIG_SND_SOC_MT8186_MT6366_DA7219_MAX98357=y'
      - 'CONFIG_SND_SOC_MT8186_MT6366_RT1019_RT5682S=y'
      - 'CONFIG_SND_SOC_MT8186_MT6366=y'
      - 'CONFIG_SND_SOC_MT8186=y'
      - 'CONFIG_SND_SOC_MT8192_MT6359_RT1015_RT5682=y'
      - 'CONFIG_SND_SOC_MT8192=y'
      - 'CONFIG_SND_SOC_SOF_MT8186=m'
      - 'CONFIG_SND_SOC_SOF_MTK_TOPLEVEL=y'
      - 'CONFIG_SND_SOC_SOF_OF=y'
      - 'CONFIG_SND_SOC_SOF_TOPLEVEL=y'
      - 'CONFIG_SPI_GPIO=y'
      - 'CONFIG_SPI_MTK_NOR=y'
      - 'CONFIG_MEDIATEK_WATCHDOG=m'
      - 'CONFIG_MTK_THERMAL=y'
      - 'CONFIG_MTK_SOC_THERMAL=m'
      - 'CONFIG_MTK_LVTS_THERMAL=m'
      - 'CONFIG_TOUCHSCREEN_MELFAS_MIP4=y'
      - 'CONFIG_TYPEC=y'
      - 'CONFIG_USB_MTU3_HOST=y'
      - 'CONFIG_VIDEO_DW9768=m'
      - 'CONFIG_VIDEO_MEDIATEK_MDP3=m'
      - 'CONFIG_VIDEO_MEDIATEK_MDP=m'
      - 'CONFIG_VIDEO_MEDIATEK_VPU=y'
      - 'CONFIG_VIDEO_OV02A10=m'
      - 'CONFIG_VIDEO_OV5695=m'
      - 'CONFIG_VIDEO_OV8856=m'
      - 'CONFIG_VIDEO_ROCKCHIP_VDEC=m'
      - '# CONFIG_ARM_DSU_PMU is not set'
      - 'CONFIG_CROS_KBD_LED_BACKLIGHT=m'
      - 'CONFIG_SND_SOC_MT8195=m'
      - 'CONFIG_SND_SOC_MT8195_MT6359=m'
      - 'CONFIG_DRM_MEDIATEK_DP=m'
      - 'CONFIG_SND_SOC_SOF_MT8195=m'
      - 'CONFIG_USB_RTL8152=y' # Allows kernel ip-config. Prevents deferred probe timeout errors.
      - 'CONFIG_USB_USBNET=y' # Needed for ASIX AX88772B ethernet adapter used at Collabora's lab. Builtin to allow kernel ip-config, and prevent deferred probe timeout errors.
      - 'CONFIG_WATCHDOG_SYSFS=y'
      - 'CONFIG_EXTRA_FIRMWARE="
      mediatek/mt8173/vpu_d.bin
      mediatek/mt8173/vpu_p.bin
      rockchip/dptx.bin
      qcom/venus-5.4/venus.mdt
      qcom/venus-5.4/venus.mbn
      mediatek/mt8183/scp.img
      mediatek/mt8186/scp.img
      mediatek/mt8192/scp.img
      mediatek/mt8195/scp.img
      mediatek/sof-tplg/sof-mt8186.tplg
      mediatek/sof-tplg/sof-mt8195-mt6359-rt1019-rt5682-dts.tplg
      mediatek/sof/sof-mt8186.ri
      mediatek/sof/sof-mt8195.ri
      mediatek/WIFI_MT7961_patch_mcu_1_2_hdr.bin
      mediatek/WIFI_RAM_CODE_MT7961_1.bin
      mrvl/sd8897_uapsta.bin
      ath10k/QCA6174/hw3.0/firmware-sdio-6.bin
      ath10k/QCA6174/hw3.0/board-2.bin
      ath10k/WCN3990/hw1.0/firmware-5.bin
      ath10k/WCN3990/hw1.0/board-2.bin
      "'


  crypto:
    path: "kernel/configs/crypto.config"
    configs:
      - 'CONFIG_CRYPTO_CHACHA20POLY1305=y'
      - 'CONFIG_CRYPTO_CHACHA20=y'
      - 'CONFIG_CRYPTO_POLY1305=y'
      - 'CONFIG_CRYPTO_AEAD=y'
      - 'CONFIG_CRYPTO_MANAGER=y'
      - 'CONFIG_CRYPTO_LIB_CHACHA_GENERIC=y'
      - 'CONFIG_CRYPTO_SKCIPHER=y'
      - 'CONFIG_CRYPTO_HASH=y'
      - 'CONFIG_CRYPTO_LIB_POLY1305_GENERIC=y'
      - 'CONFIG_CRYPTO_AEAD2=y'
      - 'CONFIG_CRYPTO_ALGAPI=y'
      - 'CONFIG_CRYPTO_MANAGER2=y'
      - 'CONFIG_CRYPTO_SKCIPHER2=y'
      - 'CONFIG_CRYPTO_HASH2=y'
      - 'CONFIG_CRYPTO_ALGAPI2=y'
      - 'CONFIG_CRYPTO_NULL2=y'
      - 'CONFIG_CRYPTO_RNG2=y'
      - 'CONFIG_CRYPTO_AKCIPHER2=y'
      - 'CONFIG_CRYPTO_KPP2=y'
      - 'CONFIG_CRYPTO_ACOMP2=y'
      - 'CONFIG_SGL_ALLOC=y'
      - 'CONFIG_CRYPTO_VMAC=y'
      - 'CONFIG_CRYPTO_PCRYPT=y'
      - 'CONFIG_PADATA=y'
      - 'CONFIG_CRYPTO_HMAC=y'
      - 'CONFIG_CRYPTO_AES=y'
      - 'CONFIG_CRYPTO_LIB_AES=y'
      - 'CONFIG_CRYPTO_SHA256=y'
      - 'CONFIG_CRYPTO_CBC=y'
      - 'CONFIG_CRYPTO_MD5=y'
      - 'CONFIG_CRYPTO_SHA1=y'
      - 'CONFIG_CRYPTO_AUTHENC=y'
      - 'CONFIG_CRYPTO_USER=y'
      - 'CONFIG_CRYPTO_USER_API_HASH=y'
      - 'CONFIG_CRYPTO_USER_API_SKCIPHER=y'
      - 'CONFIG_CRYPTO_USER_API_RNG=y'
      - 'CONFIG_CRYPTO_USER_API_AEAD=y'
      - 'CONFIG_CRYPTO_SHA3=y'
      - 'CONFIG_CRYPTO_LIB_CHACHA20POLY1305=y'
      - 'CONFIG_CRYPTO_DEV_FSL_CAAM_CRYPTO_API=y'
      - 'CONFIG_CRYPTO_DEV_FSL_CAAM_CRYPTO_API_DESC=y'
      - 'CONFIG_CRYPTO_AEAD=y'
      - 'CONFIG_CRYPTO_AUTHENC=y'
      - 'CONFIG_CRYPTO_SKCIPHER=y'
      - 'CONFIG_CRYPTO_LIB_DES=y'
      - 'CONFIG_CRYPTO_XTS=y'
      - 'CONFIG_CRYPTO_DEV_FSL_CAAM_CRYPTO_API_QI=y'
      - 'CONFIG_CRYPTO_DEV_FSL_CAAM_CRYPTO_API_DESC=y'
      - 'CONFIG_CRYPTO_DES=y'
      - 'CONFIG_CRYPTO_ECB=y'
      - 'CONFIG_CRYPTO_TEST=m'
      - 'CONFIG_CRYPTO_MANAGER_EXTRA_TESTS=y'
      - '# CONFIG_CRYPTO_MANAGER_DISABLE_TESTS is not set'

  debug:
    path: "kernel/configs/debug.config"

  ima:
    path: "kernel/configs/ima.config"
    configs:
      - 'CONFIG_INTEGRITY=y'
      - 'CONFIG_IMA=y'
      - 'CONFIG_IMA_READ_POLICY=y'

  kcidebug:
    path: "kernel/configs/kcidebug.config"
    configs:
      - 'CONFIG_CONSTRUCTORS=y'
      - 'CONFIG_GENERIC_CSUM=y'
      - 'CONFIG_KASAN_SHADOW_OFFSET=0xdffffc0000000000'
      - 'CONFIG_STACKDEPOT_ALWAYS_INIT=y'
      - 'CONFIG_REF_TRACKER=y'
      - 'CONFIG_DEBUG_SECTION_MISMATCH=y'
      - 'CONFIG_UBSAN=y'
      - 'CONFIG_CC_HAS_UBSAN_BOUNDS_STRICT=y'
      - 'CONFIG_UBSAN_BOUNDS=y'
      - 'CONFIG_UBSAN_BOUNDS_STRICT=y'
      - 'CONFIG_UBSAN_SHIFT=y'
      - 'CONFIG_UBSAN_BOOL=y'
      - 'CONFIG_UBSAN_ENUM=y'
      - 'CONFIG_UBSAN_SANITIZE_ALL=y'
      - 'CONFIG_NET_DEV_REFCNT_TRACKER=y'
      - 'CONFIG_NET_NS_REFCNT_TRACKER=y'
      - 'CONFIG_PAGE_POISONING=y'
      - 'CONFIG_DEBUG_KMEMLEAK=y'
      - 'CONFIG_DEBUG_KMEMLEAK_MEM_POOL_SIZE=16000'
      - 'CONFIG_DEBUG_KMEMLEAK_AUTO_SCAN=y'
      - 'CONFIG_SCHED_STACK_END_CHECK=y'
      - 'CONFIG_KASAN=y'
      - 'CONFIG_KASAN_GENERIC=y'
      - 'CONFIG_KASAN_INLINE=y'
      - 'CONFIG_KASAN_STACK=y'
      - 'CONFIG_KASAN_VMALLOC=y'
      - 'CONFIG_KFENCE=y'
      - 'CONFIG_KFENCE_SAMPLE_INTERVAL=100'
      - 'CONFIG_KFENCE_NUM_OBJECTS=255'
      - 'CONFIG_KFENCE_STRESS_TEST_FAULTS=0'
      - 'CONFIG_LOCKUP_DETECTOR=y'
      - 'CONFIG_SOFTLOCKUP_DETECTOR=y'
      - 'CONFIG_HARDLOCKUP_DETECTOR=y'
      - 'CONFIG_HARDLOCKUP_DETECTOR_PERF=y'
      - 'CONFIG_HARDLOCKUP_DETECTOR_COUNTS_HRTIMER=y'
      - 'CONFIG_DETECT_HUNG_TASK=y'
      - 'CONFIG_DEFAULT_HUNG_TASK_TIMEOUT=120'
      - 'CONFIG_WQ_WATCHDOG=y'
      - 'CONFIG_PROVE_LOCKING=y'
      - 'CONFIG_DEBUG_RT_MUTEXES=y'
      - 'CONFIG_DEBUG_SPINLOCK=y'
      - 'CONFIG_DEBUG_MUTEXES=y'
      - 'CONFIG_DEBUG_WW_MUTEX_SLOWPATH=y'
      - 'CONFIG_DEBUG_RWSEMS=y'
      - 'CONFIG_DEBUG_LOCK_ALLOC=y'
      - 'CONFIG_LOCKDEP=y'
      - 'CONFIG_LOCKDEP_BITS=15'
      - 'CONFIG_LOCKDEP_CHAINS_BITS=16'
      - 'CONFIG_LOCKDEP_STACK_TRACE_BITS=19'
      - 'CONFIG_LOCKDEP_STACK_TRACE_HASH_BITS=14'
      - 'CONFIG_LOCKDEP_CIRCULAR_QUEUE_BITS=12'
      - 'CONFIG_DEBUG_ATOMIC_SLEEP=y'
      - 'CONFIG_TRACE_IRQFLAGS=y'
      - 'CONFIG_TRACE_IRQFLAGS_NMI=y'
      - 'CONFIG_PROVE_RCU=y'
      - 'CONFIG_PREEMPTIRQ_TRACEPOINTS=y'

  kselftest:
    path: "kernel/configs/kselftest.config"
    configs:
      - '# CONFIG_DUMMY is not set'
      - 'CONFIG_NET_IPGRE=m'
      - 'CONFIG_NET_IPGRE_DEMUX=m'

  lab-setup:
    path: "kernel/configs/lab-setup.config"
    configs:
      - 'CONFIG_NFS_FS=y'
      - 'CONFIG_NFS_V2=y'
      - 'CONFIG_NFS_V3=y'
      - 'CONFIG_NFS_V3_ACL=y'
      - 'CONFIG_NFS_V4=y'
      # Disable kernel IP config to avoid needing builtin network support,
      # prevent long boot delays and deferred probe timeout errors. Rely on
      # ramdisk to do the IP config.
      - 'CONFIG_IP_PNP=n'
      # Network adapters
      - 'CONFIG_USB_ETH=m'
      - 'CONFIG_USB_GADGET=m'
      - 'CONFIG_USB_RTL8152=m'
      - 'CONFIG_USB_USBNET=m'
      - 'CONFIG_USB_NET_AX8817X=m'

  preempt_rt:
    path: "kernel/configs/preempt_rt.config"
    configs:
      - 'CONFIG_EXPERT=y'
      - 'CONFIG_PREEMPT_RT=y'
      - 'CONFIG_PREEMPT_RT_FULL=y' # <= v4.19

  rust:
    path: "kernel/configs/rust.config"
    configs:
      - '# CONFIG_X86_KERNEL_IBT is not set'
      - '# CONFIG_RETPOLINE is not set'
      - '# CONFIG_RETHUNK is not set'
      - 'CONFIG_RUST=y'

  rust-for-linux-samples:
    path: "kernel/configs/rust-for-linux-samples.config"
    configs:
      - 'CONFIG_SAMPLES=y'
      - 'CONFIG_SAMPLES_RUST=y'
      - 'CONFIG_SAMPLE_RUST_MINIMAL=m'
      - 'CONFIG_SAMPLE_RUST_HOSTPROGS=m'
      - 'CONFIG_SAMPLE_RUST_PRINT=m'
      - 'CONFIG_SAMPLE_RUST_MODULE_PARAMETERS=m'
      - 'CONFIG_SAMPLE_RUST_SYNC=m'
      - 'CONFIG_SAMPLE_RUST_CHRDEV=m'
      - 'CONFIG_SAMPLE_RUST_MISCDEV=m'
      - 'CONFIG_SAMPLE_RUST_STACK_PROBING=m'
      - 'CONFIG_SAMPLE_RUST_SEMAPHORE=m'
      - 'CONFIG_SAMPLE_RUST_SEMAPHORE_C=m'
      - 'CONFIG_SAMPLE_RUST_RANDOM=m'
      - 'CONFIG_SAMPLE_RUST_PLATFORM=m'
      - 'CONFIG_SAMPLE_RUST_FS=m'
      - 'CONFIG_SAMPLE_RUST_NETFILTER=m'
      - 'CONFIG_SAMPLE_RUST_ECHO_SERVER=m'
      - 'CONFIG_SAMPLE_RUST_HOSTPROGS=m'
      - 'CONFIG_SAMPLE_RUST_SELFTESTS=m'

  rust-samples:
    path: "kernel/configs/rust-samples.config"
    configs:
      - 'CONFIG_SAMPLES=y'
      - 'CONFIG_SAMPLES_RUST=y'
      - 'CONFIG_SAMPLE_RUST_HOSTPROGS=y'
      - 'CONFIG_SAMPLE_RUST_MINIMAL=m'

  tinyconfig:
    path: "kernel/configs/tiny.config"
    defconfig: 'tinyconfig'

  virtualvideo:
    path: "kernel/configs/virtualvideo.config"
    configs:
      - 'CONFIG_FB=y'
      - 'CONFIG_MEDIA_SUPPORT=y'
      - 'CONFIG_MEDIA_CAMERA_SUPPORT=y'
      - 'CONFIG_MEDIA_TEST_SUPPORT=y'
      - 'CONFIG_VIDEO_DEV=y'
      - 'CONFIG_VIDEO_V4L2=y'
      - 'CONFIG_V4L_TEST_DRIVERS=y'
      - 'CONFIG_VIDEO_VIVID=y'
      - 'CONFIG_VIDEO_VIVID_MAX_DEVS=64'

  x86-board:
    path: "kernel/configs/x86-board.config"
    configs:
      - 'CONFIG_ACPI_ALS=m'
      - 'CONFIG_ACPI_DPTF=y'
      - 'CONFIG_AMD_PMC=m'
      - 'CONFIG_ATH10K_PCI=m'
      - 'CONFIG_ATH10K=m'
      - 'CONFIG_BLK_DEV_NVME=y'
      - 'CONFIG_BT_HCIBTUSB=m'
      - 'CONFIG_BT=m'
      - 'CONFIG_CHARGER_CROS_USBPD=m'
      - 'CONFIG_CHARGER_WILCO=m'
      - 'CONFIG_CHROME_PLATFORMS=y'
      - 'CONFIG_CHROMEOS_ACPI=y'
      - 'CONFIG_CHROMEOS_LAPTOP=y'
      - 'CONFIG_CHROMEOS_PSTORE=m'
      - 'CONFIG_CHROMEOS_TBMC=y'
      - 'CONFIG_CROS_EC_I2C=y'
      - 'CONFIG_CROS_EC_ISHTP=m'
      - 'CONFIG_CROS_EC_LPC=y'
      - 'CONFIG_CROS_EC_SPI=m'
      - 'CONFIG_CROS_EC_TYPEC=m'
      - 'CONFIG_CROS_EC=y'
      - 'CONFIG_CROS_KBD_LED_BACKLIGHT=m'
      - 'CONFIG_DPTF_PCH_FIVR=m'
      - 'CONFIG_DRM_AMD_ACP=y'
      - 'CONFIG_DRM_AMDGPU=y'
      - 'CONFIG_EDAC=y'
      - 'CONFIG_EEPROM_AT24=m'
      - 'CONFIG_GOOGLE_COREBOOT_TABLE=m'
      - 'CONFIG_GOOGLE_FIRMWARE=y'
      - 'CONFIG_GOOGLE_MEMCONSOLE_COREBOOT=m'
      - 'CONFIG_GOOGLE_MEMCONSOLE_X86_LEGACY=m'
      - 'CONFIG_GOOGLE_SMI=m'
      - 'CONFIG_GOOGLE_VPD=m'
      - 'CONFIG_I2C_CROS_EC_TUNNEL=m'
      - 'CONFIG_I2C_DESIGNWARE_BAYTRAIL=y'
      - 'CONFIG_I2C_DESIGNWARE_PCI=y'
      - 'CONFIG_I2C_DESIGNWARE_PLATFORM=y'
      - 'CONFIG_I2C_HID_ACPI=m'
      - 'CONFIG_I2C_HID=m'
      - 'CONFIG_I2C_PIIX4=m'
      - 'CONFIG_IIO_CROS_EC_ACCEL_LEGACY=m'
      - 'CONFIG_IIO_CROS_EC_BARO=m'
      - 'CONFIG_IIO_CROS_EC_LIGHT_PROX=m'
      - 'CONFIG_IIO_CROS_EC_SENSORS_CORE=m'
      - 'CONFIG_IIO_CROS_EC_SENSORS_LID_ANGLE=m'
      - 'CONFIG_IIO_CROS_EC_SENSORS=m'
      - 'CONFIG_IIO=m'
      - 'CONFIG_INT340X_THERMAL=m'
      - 'CONFIG_INTEL_IDMA64=m'
      - 'CONFIG_INTEL_ISH_HID=m'
      - 'CONFIG_INTEL_PMC_CORE=m'
      - 'CONFIG_INTEL_PMT_TELEMETRY=m'
      - 'CONFIG_INTEL_PUNIT_IPC=m'
      - 'CONFIG_INTEL_SCU_PLATFORM=m'
      - 'CONFIG_INTEL_TELEMETRY=m'
      - 'CONFIG_INTEL_VBTN=m'
      - 'CONFIG_INTEL_VSEC=m'
      - 'CONFIG_ITCO_WDT=m'
      - 'CONFIG_IWLDVM=m'
      - 'CONFIG_IWLDVM=m'
      - 'CONFIG_IWLMVM=m'
      - 'CONFIG_IWLMVM=m'
      - 'CONFIG_IWLWIFI=m'
      - 'CONFIG_IWLWIFI=m'
      - 'CONFIG_KEYBOARD_CROS_EC=m'
      - 'CONFIG_MEDIA_CAMERA_SUPPORT=y'
      - 'CONFIG_MEDIA_SUPPORT=y'
      - 'CONFIG_MEDIA_USB_SUPPORT=y'
      - 'CONFIG_MFD_CROS_EC_DEV=m'
      - 'CONFIG_MFD_INTEL_LPSS_ACPI=m'
      - 'CONFIG_MFD_INTEL_LPSS_PCI=y'
      - 'CONFIG_MFD_INTEL_PMC_BXT=m'
      - 'CONFIG_MMC_SDHCI_ACPI=y'
      - 'CONFIG_MMC_SDHCI_PCI=y'
      - 'CONFIG_MMC_SDHCI=y'
      - 'CONFIG_MMC=y'
      - 'CONFIG_MOUSE_ELAN_I2C=m'
      - 'CONFIG_MT7921E=m'
      - 'CONFIG_NFS_FS=y'
      - 'CONFIG_NFS_V2=y'
      - 'CONFIG_NFS_V3_ACL=y'
      - 'CONFIG_NFS_V3=y'
      - 'CONFIG_NFS_V4=y'
      - 'CONFIG_NVME_CORE=y'
      - 'CONFIG_PINCTRL_AMD=y'
      - 'CONFIG_PINCTRL_BAYTRAIL=y'
      - 'CONFIG_PINCTRL_BROXTON=m'
      - 'CONFIG_PINCTRL_CANNONLAKE=m'
      - 'CONFIG_PINCTRL_GEMINILAKE=m'
      - 'CONFIG_PINCTRL_JASPERLAKE=m'
      - 'CONFIG_PINCTRL_SUNRISEPOINT=m'
      - 'CONFIG_PINCTRL_SX150X=y'
      - 'CONFIG_PINCTRL_TIGERLAKE=m'
      - 'CONFIG_ROOT_NFS=y'
      - 'CONFIG_RTC_DRV_CROS_EC=m'
      - 'CONFIG_RTW88_8822CE=m'
      - 'CONFIG_RTW88=m'
      - 'CONFIG_RTW89_8852AE=m'
      - 'CONFIG_RTW89=m'
      - 'CONFIG_SERIAL_8250_CONSOLE=y'
      - 'CONFIG_SERIAL_8250_DW=y'
      - 'CONFIG_SERIAL_8250=y'
      - 'CONFIG_SND_DESIGNWARE_I2S=m'
      - 'CONFIG_SND_DESIGNWARE_I2S=m'
      - 'CONFIG_SND_DESIGNWARE_PCM=y'
      - 'CONFIG_SND_HDA_CODEC_HDMI=m'
      - 'CONFIG_SND_HDA_GENERIC=m'
      - 'CONFIG_SND_SIMPLE_CARD=m'
      - 'CONFIG_SND_SOC_AMD_ACP=m'
      - 'CONFIG_SND_SOC_AMD_ACP3x=m'
      - 'CONFIG_SND_SOC_AMD_CZ_DA7219MX98357_MACH=m'
      - 'CONFIG_SND_SOC_AMD_RV_RT5682_MACH=m'
      - 'CONFIG_SND_SOC_CROS_EC_CODEC=m'
      - 'CONFIG_SND_SOC_INTEL_AVS_MACH_MAX98357A=m'
      - 'CONFIG_SND_SOC_INTEL_AVS_MACH_NAU8825=m'
      - 'CONFIG_SND_SOC_INTEL_AVS=m'
      - 'CONFIG_SND_SOC_INTEL_BDW_RT5677_MACH=m'
      - 'CONFIG_SND_SOC_INTEL_GLK_RT5682_MAX98357A_MACH=m'
      - 'CONFIG_SND_SOC_INTEL_HASWELL_MACH=m'
      - 'CONFIG_SND_SOC_INTEL_HASWELL=m'
      - 'CONFIG_SND_SOC_INTEL_KBL_RT5663_MAX98927_MACH=m'
      - 'CONFIG_SND_SOC_INTEL_SOF_CML_RT1011_RT5682_MACH=m'
      - 'CONFIG_SND_SOC_INTEL_SOF_NAU8825_MACH=m'
      - 'CONFIG_SND_SOC_MAX98927=m'
      - 'CONFIG_SND_SOC_SOF_ACPI=m'
      - 'CONFIG_SND_SOC_SOF_HDA_AUDIO_CODEC=y'
      - 'CONFIG_SND_SOC_SOF_HDA_LINK=y'
      - 'CONFIG_SND_SOC_SOF_INTEL_TOPLEVEL=y'
      - 'CONFIG_SND_SOC_SOF_PCI=m'
      - 'CONFIG_SND_SOC_SOF_TOPLEVEL=y'
      - 'CONFIG_SND_SOC=m'
      - 'CONFIG_SP5100_TCO=m'
      - 'CONFIG_SPI_PXA2XX=y'
      - 'CONFIG_SPI=y'
      - 'CONFIG_TCG_TIS_I2C_CR50=y'
      - 'CONFIG_TCG_TIS_SPI_CR50=y'
      - 'CONFIG_TCG_TIS_SPI=y'
      - 'CONFIG_TCG_TIS=y'
      - 'CONFIG_TCG_TPM=y'
      - 'CONFIG_TOUCHSCREEN_ATMEL_MXT=m'
      - 'CONFIG_TOUCHSCREEN_RM_TS=m'
      - 'CONFIG_TYPEC_MUX_INTEL_PMC=m'
      - 'CONFIG_TYPEC_UCSI=m'
      - 'CONFIG_TYPEC=m'
      - 'CONFIG_UCSI_ACPI=m'
      - 'CONFIG_USB_ETH=y'
      - 'CONFIG_USB_GADGET=y'
      - 'CONFIG_USB_ROLE_SWITCH=m'
      - 'CONFIG_USB_RTL8152=y'
      - 'CONFIG_USB_USBNET=y' # Needed for ASIX AX88772B ethernet adapter used at Collabora's lab. Builtin to allow kernel ip-config, and prevent deferred probe timeout errors.
      - 'CONFIG_USB_VIDEO_CLASS=m'
      - 'CONFIG_VIDEO_OV2740=m'
      - 'CONFIG_VIDEO_OV5675=m'
      - 'CONFIG_WATCHDOG_SYSFS=y'
      - 'CONFIG_WILCO_EC_DEBUGFS=m'
      - 'CONFIG_WILCO_EC_EVENTS=m'
      - 'CONFIG_WILCO_EC_TELEMETRY=m'
      - 'CONFIG_WILCO_EC=m'
      - 'CONFIG_X86_AMD_PLATFORM_DEVICE=y'
      - 'CONFIG_X86_INTEL_LPSS=y'
      - 'CONFIG_EXTRA_FIRMWARE="
      amdgpu/dcn_3_1_6_dmcub.bin
      amdgpu/gc_10_3_7_ce.bin
      amdgpu/gc_10_3_7_me.bin
      amdgpu/gc_10_3_7_mec2.bin
      amdgpu/gc_10_3_7_mec.bin
      amdgpu/gc_10_3_7_pfp.bin
      amdgpu/gc_10_3_7_rlc.bin
      amdgpu/green_sardine_asd.bin
      amdgpu/green_sardine_ce.bin
      amdgpu/green_sardine_sdma.bin
      amdgpu/green_sardine_dmcub.bin
      amdgpu/green_sardine_pfp.bin
      amdgpu/green_sardine_vcn.bin
      amdgpu/green_sardine_ta.bin
      amdgpu/green_sardine_dmcub.bin
      amdgpu/green_sardine_me.bin
      amdgpu/green_sardine_mec.bin
      amdgpu/green_sardine_mec2.bin
      amdgpu/green_sardine_rlc.bin
      amdgpu/psp_13_0_8_asd.bin
      amdgpu/psp_13_0_8_ta.bin
      amdgpu/psp_13_0_8_toc.bin
      amdgpu/raven2_asd.bin
      amdgpu/raven2_ce.bin
      amdgpu/raven2_gpu_info.bin
      amdgpu/raven2_me.bin
      amdgpu/raven2_mec2.bin
      amdgpu/raven2_mec.bin
      amdgpu/raven2_pfp.bin
      amdgpu/raven2_rlc.bin
      amdgpu/raven2_sdma.bin
      amdgpu/raven2_ta.bin
      amdgpu/raven2_vcn.bin
      amdgpu/raven_kicker_rlc.bin
      amdgpu/sdma_5_2_7.bin
      amdgpu/stoney_ce.bin
      amdgpu/stoney_me.bin
      amdgpu/stoney_mec.bin
      amdgpu/stoney_pfp.bin
      amdgpu/stoney_rlc.bin
      amdgpu/stoney_sdma.bin
      amdgpu/stoney_uvd.bin
      amdgpu/stoney_vce.bin
      amdgpu/yellow_carp_vcn.bin
      i915/glk_dmc_ver1_04.bin
      i915/kbl_dmc_ver1_04.bin
      rtl_nic/rtl8153a-4.fw
      rtl_nic/rtl8153b-2.fw
      ath10k/QCA6174/hw3.0/firmware-6.bin
      ath10k/QCA6174/hw3.0/board-2.bin
      rtw88/rtw8822c_fw.bin
      rtw88/rtw8822c_wow_fw.bin
      rtw89/rtw8852a_fw.bin
      iwlwifi-so-a0-gf-a0-86.ucode
      iwlwifi-so-a0-gf-a0.pnvm
      iwlwifi-QuZ-a0-hr-b0-77.ucode
      iwlwifi-7265D-29.ucode
      iwlwifi-cc-a0-77.ucode
      mediatek/WIFI_RAM_CODE_MT7961_1.bin
      mediatek/WIFI_MT7961_patch_mcu_1_2_hdr.bin
      iwlwifi-9000-pu-b0-jf-b0-46.ucode
      "'

  x86_kvm_guest:
    path: "kernel/configs/kvm_guest.config"


build_environments:

  gcc-12:
    cc: gcc
    cc_version: 10
    arch_params: &gcc_arch_params
      arc: &arc_params
        cross_compile: 'arc-elf32-'
      arm: &arm_params
        cross_compile: 'arm-linux-gnueabihf-'
      arm64: &arm64_params
        cross_compile: 'aarch64-linux-gnu-'
        cross_compile_compat: 'arm-linux-gnueabihf-'
      i386: &i386_params
        name: 'x86'
      mips: &mips_params
        cross_compile: 'mips-linux-gnu-'
      sparc: &sparc_params
        cross_compile: 'sparc64-linux-gnu-'
      x86_64: &x86_64_params
        name: 'x86'
      riscv: &riscv_params
        name: 'riscv64'
        cross_compile: 'riscv64-linux-gnu-'

  clang-15:
    cc: clang
    cc_version: 15
    arch_params: &clang_15_arch_params
      arm: *arm_params
      arm64: *arm64_params
      i386: *i386_params
      mips: *mips_params
      x86_64: *x86_64_params
      riscv:
        <<: *riscv_params
        opts:
          LLVM_IAS: '1'
          LD: 'riscv64-linux-gnu-ld'

  clang-16:
    cc: clang
    cc_version: 16
    arch_params: *clang_15_arch_params

  clang-17:
    cc: clang
    cc_version: 17
    arch_params: *clang_15_arch_params

  rustc-1.74:
    cc: clang
    cc_version: 17
    arch_params:
      x86_64: *x86_64_params

  rustc-1.75:
    cc: clang
    cc_version: 17
    arch_params:
      x86_64: *x86_64_params

# Default config with full build coverage
build_configs_defaults:
  variants:
    gcc-12: &default_gcc-12
      build_environment: gcc-12

      fragments: &default_fragments
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

      architectures: &default_architectures

        arc: &arc_arch
          base_defconfig: 'haps_hs_smp_defconfig'
          extra_configs: ['allnoconfig']
          filters: &arc_default_filters
            # remove any non-ARCv2 defconfigs since we only have ARCv2 toolchain
            - blocklist:
                defconfig:
                  - 'axs101_defconfig'
                  - 'nps_defconfig'
                  - 'nsim_700_defconfig'
                  - 'nsimosci_defconfig'
                  - 'tb10x_defconfig'
            # haps_hs_smp_defconfig not available in some old kernels
                kernel: ['v3.', 'v4.4', 'v4.9']

        arm: &arm_arch
          base_defconfig: 'multi_v7_defconfig'
          extra_configs:
# Disabling to reduce load
#            - 'allmodconfig'
            - 'allnoconfig'
            - 'multi_v7_defconfig+CONFIG_CPU_BIG_ENDIAN=y'
            - 'multi_v7_defconfig+CONFIG_SMP=n'
            - 'multi_v7_defconfig+CONFIG_EFI=y+CONFIG_ARM_LPAE=y'
            - 'multi_v7_defconfig+CONFIG_THUMB2_KERNEL=y'
# Disabling to reduce load
#          fragments: [crypto, ima]

        arm64: &arm64_arch
          extra_configs:
# Disabling to reduce load
#            - 'allmodconfig'
            - 'allnoconfig'
            - 'defconfig+CONFIG_CPU_BIG_ENDIAN=y'
            - 'defconfig+arm64-chromebook+kselftest'
# Disabling to reduce load
#            - 'defconfig+CONFIG_RANDOMIZE_BASE=y'
#          fragments: [arm64-chromebook, crypto, ima]
          fragments: [arm64-chromebook]

        i386: &i386_arch
          base_defconfig: 'i386_defconfig'
          extra_configs: ['allnoconfig']

        mips: &mips_arch
          base_defconfig: '32r2el_defconfig'
          extra_configs: ['allnoconfig']
          filters: &mips_default_filters
            - blocklist: {defconfig: ['generic_defconfig']}

        riscv: &riscv_arch
          extra_configs: ['allnoconfig']
          filters:
            - blocklist: &riscv_kernel_filter
                kernel: ['v3.', 'v4.4', 'v4.9', 'v4.14']

        sparc: &sparc_arch
          base_defconfig: 'sparc64_defconfig'
          extra_configs: ['allnoconfig']

        x86_64: &x86_64_arch
          base_defconfig: 'x86_64_defconfig'
          extra_configs:
# Disabling to reduce load
#            - 'allmodconfig'
            - 'allnoconfig'
            - 'x86_64_defconfig+x86-board+kselftest'
# Disabling to reduce load
#            - 'x86_64_defconfig+x86-board+amdgpu'
#          fragments: [amdgpu, crypto, ima, x86_kvm_guest, x86-board]
          fragments: [x86-board]

  reference:
    tree: mainline
    branch: 'master'


# Set of configs to build with Clang
arch_clang_configs: &arch_clang_configs
  arm64:
    extra_configs:
# Disabling to reduce load
#      - 'allmodconfig'
      - 'allnoconfig'
      - 'defconfig+CONFIG_ARM64_64K_PAGES=y'
  arm:
    base_defconfig: 'multi_v7_defconfig'
    filters:
      - regex: {
# Disabling to reduce load
#          defconfig: '(?:aspeed_g5_def|multi_v5_def|multi_v7_def|allmod|allno)config',
          defconfig: '(?:aspeed_g5_def|multi_v5_def|multi_v7_def|allno)config',
          }
    extra_configs:
      - 'aspeed_g5_defconfig'
      - 'multi_v5_defconfig'
# Disabling to reduce load
#      - 'allmodconfig'
      - 'allnoconfig'
  x86_64:
    base_defconfig: 'x86_64_defconfig'
    extra_configs:
# Disabling to reduce load
#      - 'allmodconfig'
      - 'allnoconfig'
  i386:
    base_defconfig: 'i386_defconfig'
    extra_configs:
# Disabling to reduce load
#      - 'allmodconfig'
      - 'allnoconfig'
  riscv:
    extra_configs: &riscv_clang_configs
      - 'allnoconfig'

# Minimum architecture defconfigs
arch_defconfigs: &arch_defconfigs
  arc: &arc_defconfig
    base_defconfig: 'haps_hs_smp_defconfig'
    filters:
      - regex: { defconfig: 'haps_hs_smp_defconfig' }
  arm: &arm_defconfig
    base_defconfig: 'multi_v7_defconfig'
    filters:
      - regex: { defconfig: 'multi_v7_defconfig' }
  arm64: &arm64_defconfig
    base_defconfig: 'defconfig'
    filters:
      - regex: { defconfig: 'defconfig' }
  i386: &i386_defconfig
    base_defconfig: 'i386_defconfig'
    filters:
      - regex: { defconfig: 'i386_defconfig' }
  mips: &mips_defconfig
    base_defconfig: '32r2el_defconfig'
    filters:
      - regex: { defconfig: '32r2el_defconfig' }
  riscv: &riscv_defconfig
    base_defconfig: 'defconfig'
    filters:
      - regex: { defconfig: 'defconfig' }
      - blocklist: *riscv_kernel_filter
  sparc: &sparc_defconfig
    base_defconfig: 'sparc64_defconfig'
    filters:
      - regex: { defconfig: 'sparc64_defconfig' }
  x86_64: &x86_64_defconfig
    base_defconfig: 'x86_64_defconfig'
    filters:
      - regex: { defconfig: 'x86_64_defconfig' }


# Small subset of builds, only defconfigs
minimal_variants: &minimal_variants
  gcc-12: &gcc_12_minimal
    build_environment: gcc-12
    architectures: *arch_defconfigs

# Medium subset of builds
medium_variants: &medium_variants
  gcc-12:
    build_environment: gcc-12
    architectures:
      x86_64: *x86_64_arch
      i386: *i386_arch
      arm64: *arm64_arch
      arm: *arm_arch


preempt_rt_variants: &preempt_rt_variants
  gcc-12:
    build_environment: gcc-12
    fragments: [preempt_rt]
    architectures:
      arm:
        <<: *arm_defconfig
        extra_configs:
          - 'multi_v7_defconfig+preempt_rt'
      arm64:
        <<: *arm64_defconfig
        fragments: [arm64-chromebook]
        extra_configs:
          - 'defconfig+preempt_rt'
          - 'defconfig+preempt_rt+arm64-chromebook'
      x86_64:
        <<: *x86_64_defconfig
        fragments: [x86-board]
        extra_configs:
          - 'x86_64_defconfig+preempt_rt'
          - 'x86_64_defconfig+preempt_rt+x86-board'


chrome_platform_variants: &chrome_platform_variants
  gcc-12:
    build_environment: gcc-12
    architectures:
      arm: *arm_defconfig
      arm64:
        <<: *arm64_defconfig
        fragments: [arm64-chromebook]
      x86_64:
        <<: *x86_64_defconfig
        fragments: [x86-board]


build_configs:

  agross:
    tree: agross
    branch: 'ci-next'
    variants: *minimal_variants

  alex:
    tree: alex
    branch: 'kernel-ci'
    variants: *minimal_variants

  amlogic:
    tree: amlogic
    branch: 'for-next'
    variants: *minimal_variants

  amlogic_integ:
    tree: amlogic
    branch: 'integ'
    variants: *minimal_variants

  ardb:
    tree: ardb
    branch: 'for-kernelci'
    variants: *minimal_variants

  arm64:
    tree: arm64
    branch: 'for-kernelci'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          arm64:
            base_defconfig: 'defconfig'
            extra_configs:
# Disabling to reduce load
#              - 'allmodconfig'
              - 'allnoconfig'

  arnd:
    tree: arnd
    branch: 'to-build'
    variants: *minimal_variants

  broonie-misc:
    tree: broonie-misc
    branch: 'for-kernelci'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          arm: {base_defconfig: 'multi_v7_defconfig'}
          arm64:
          x86_64: {base_defconfig: 'x86_64_defconfig'}

  broonie-regmap:
    tree: broonie-regmap
    branch: 'for-next'
    variants: *minimal_variants

  broonie-regmap-fixes:
    tree: broonie-regmap
    branch: 'for-linus'
    variants: *minimal_variants

  broonie-regulator:
    tree: broonie-regulator
    branch: 'for-next'
    variants: *minimal_variants

  broonie-regulator-fixes:
    tree: broonie-regulator
    branch: 'for-linus'
    variants: *minimal_variants

  broonie-sound:
    tree: broonie-sound
    branch: 'for-next'
    variants: *minimal_variants

  broonie-sound-fixes:
    tree: broonie-sound
    branch: 'for-linus'
    variants: *minimal_variants

  broonie-spi:
    tree: broonie-spi
    branch: 'for-next'
    variants: *minimal_variants

  broonie-spi-fixes:
    tree: broonie-spi
    branch: 'for-linus'
    variants: *minimal_variants

  chrome-platform:
    tree: chrome-platform
    branch: 'for-kernelci'
    variants: *chrome_platform_variants

  chrome-platform-firmware:
    tree: chrome-platform
    branch: 'for-firmware-kernelci'
    variants: *chrome_platform_variants

  clk:
    tree: clk
    branch: 'clk-next'
    variants: *minimal_variants

  efi:
    tree: efi
    branch: 'next'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          arm: *arm_defconfig
          arm64: *arm64_defconfig
          i386: *i386_defconfig
          x86_64: *x86_64_defconfig

  efi_urgent:
    tree: efi
    branch: 'urgent'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          arm: *arm_defconfig
          arm64: *arm64_defconfig
          i386: *i386_defconfig
          x86_64: *x86_64_defconfig

  evalenti:
    tree: evalenti
    branch: 'for-kernelci'
    variants: *minimal_variants

  khilman:
    tree: khilman
    branch: 'to-build'
    variants: *minimal_variants

  krzysztof:
    tree: krzysztof
    branch: 'for-next'
    variants: *minimal_variants

  kselftest_fixes: &kselftest-tree
    tree: kselftest
    branch: 'fixes'
    variants:
      gcc-12:
        build_environment: gcc-12
        fragments: [kselftest]
        architectures:
          arm:
            <<: *arm_defconfig
            filters: &kselftest-only
              - regex: { defconfig: '.*kselftest.*' }
          arm64: &arm64-kselftest
            <<: *arm64_defconfig
            fragments: [arm64-chromebook]
            extra_configs: ['defconfig+kselftest+arm64-chromebook']
            filters: *kselftest-only
          i386:
            <<: *i386_defconfig
            filters: *kselftest-only
          x86_64: &x86_64-kselftest
            <<: *x86_64_defconfig
            fragments: [x86-board]
            extra_configs: ['x86_64+defconfig+kselftest+x86-board']
            filters: *kselftest-only
      clang-16:
        build_environment: clang-16
        fragments: [kselftest]
        architectures:
          arm64: *arm64-kselftest
          x86_64: *x86_64-kselftest

  kselftest_next:
    <<: *kselftest-tree
    branch: 'next'

  lee_backlight:
    tree: lee-backlight
    branch: 'for-backlight-next'
    variants: *minimal_variants

  lee_mfd:
    tree: lee-mfd
    branch: 'for-mfd-next'
    variants: *minimal_variants

  linusw_devel:
    tree: linusw
    branch: 'devel'
    variants: *minimal_variants

  linusw_fixes:
    tree: linusw
    branch: 'fixes'
    variants: *minimal_variants

  linusw_for-next:
    tree: linusw
    branch: 'for-next'
    variants: *minimal_variants

  mainline:
    tree: mainline
    branch: 'master'
    variants:
      gcc-12:
        <<: *default_gcc-12
        architectures:
          <<: *default_architectures
          arm64:
            <<: *arm64_arch
            extra_configs:
              - 'allnoconfig'
              - 'defconfig+CONFIG_CPU_BIG_ENDIAN=y'
              - 'defconfig+arm64-chromebook+kselftest'
            fragments: [arm64-chromebook]

      # Minimum version
      clang-15:
        build_environment: clang-15
        architectures:
          arm64:
            extra_configs:
# Disabling to reduce load
#            - 'allmodconfig'
            - 'allnoconfig'
            - 'defconfig+CONFIG_ARM64_64K_PAGES=y'
          arm:
            base_defconfig: 'multi_v7_defconfig'
            filters:
              - regex: {

# Disabling to reduce load
#                  defconfig: '(?:aspeed_g5_def|multi_v5_def|multi_v7_def|allmod|allno)config',
                  defconfig: '(?:aspeed_g5_def|multi_v5_def|multi_v7_def|allno)config',
              }
            extra_configs:
              - 'aspeed_g5_defconfig'
              - 'multi_v5_defconfig'
# Disabling to reduce load
#              - 'allmodconfig'
              - 'allnoconfig'
          x86_64:
            base_defconfig: 'x86_64_defconfig'
            extra_configs:
# Disabling to reduce load
#              - 'allmodconfig'
              - 'allnoconfig'
          i386:
            base_defconfig: 'i386_defconfig'
            extra_configs:
# Disabling to reduce load
#              - 'allmodconfig'
              - 'allnoconfig'

      # Latest stable release
      clang-16:
        build_environment: clang-16
        architectures: *arch_clang_configs
      rustc-1.74:
        build_environment: rustc-1.74
        fragments: [rust, rust-samples, kselftest]
        architectures:
          x86_64:
            base_defconfig: 'x86_64_defconfig'

#  media:
#    tree: media
#    branch: 'master'
#    variants:
#      gcc-12:
#        build_environment: gcc-12
#        fragments: [virtualvideo]
#        architectures:
#          i386: *i386_arch
#          x86_64: *x86_64_arch
#          arm: *arm_arch
#          arm64:
#            <<: *arm64_arch
#            extra_configs:
#              - 'allnoconfig'
#              - 'defconfig+CONFIG_CPU_BIG_ENDIAN=y'
#              - 'defconfig+arm64-chromebook+kselftest'
#              - 'defconfig+arm64-chromebook+videodec'
#            fragments: [arm64-chromebook, videodec]

  mediatek-for-next:
    tree: mediatek
    branch: 'for-next'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          arm64:
            <<: *arm64_defconfig
            fragments: [arm64-chromebook]
          x86_64:
            <<: *x86_64_defconfig
            fragments: [x86-board]

  net-next:
    tree: net-next
    branch: 'master'
    variants: *minimal_variants

  next:
    tree: next
    branch: 'master'
    variants:
      gcc-12:
        build_environment: gcc-12
        fragments: *default_fragments
        architectures:
          i386: *i386_arch
          x86_64: *x86_64_arch
          mips: *mips_arch
          riscv: *riscv_arch
          sparc: *sparc_arch
          arc: *arc_arch
          arm64:
            <<: *arm64_arch
            extra_configs:
# Disabling to reduce load
#              - 'allmodconfig'
              - 'allnoconfig'
              - 'defconfig+CONFIG_ARM64_16K_PAGES=y'
              - 'defconfig+CONFIG_ARM64_64K_PAGES=y'
              - 'defconfig+CONFIG_CPU_BIG_ENDIAN=y'
              - 'defconfig+CONFIG_RANDOMIZE_BASE=y'
              - 'defconfig+arm64-chromebook+kselftest'
            fragments: [arm64-chromebook]
          arm:
            base_defconfig: 'multi_v7_defconfig'
            extra_configs:
              - 'multi_v7_defconfig+CONFIG_CPU_BIG_ENDIAN=y'
              - 'multi_v7_defconfig+CONFIG_SMP=n'
              - 'multi_v7_defconfig+CONFIG_EFI=y+CONFIG_ARM_LPAE=y'
              - 'multi_v7_defconfig+CONFIG_THUMB2_KERNEL=y'
              - 'allnoconfig'
# Disabling to reduce load
#              - 'allmodconfig'

      # Current development clang release
      clang-17:
        build_environment: clang-17
        architectures:
          <<: *arch_clang_configs

      rustc-1.75:
        build_environment: rustc-1.75
        fragments: [rust, rust-samples, kselftest]
        architectures:
          x86_64:
            base_defconfig: 'x86_64_defconfig'

  next_pending-fixes:
    tree: next
    branch: 'pending-fixes'
    variants: *minimal_variants

  omap:
    tree: omap
    branch: 'for-next'
    variants: *minimal_variants

  peterz:
    tree: peterz
    branch: 'kernelci'
    variants: *minimal_variants

  pm:
    tree: pm
    branch: 'testing'
    variants: *minimal_variants

  pmwg:
    tree: pmwg
    branch: 'integ'
    variants: *minimal_variants

  qcom-lt:
    tree: qcom-lt
    branch: 'integration-linux-qcomlt'
    variants: *minimal_variants

  qcom-lt_experimental:
    tree: qcom-lt
    branch: 'integration-experimental'
    variants: *minimal_variants

  renesas:
    tree: renesas
    branch: 'master'
    variants: *minimal_variants

  renesas_next:
    tree: renesas
    branch: 'next'
    variants: *minimal_variants

  riscv_fixes: &riscv-tree
    tree: riscv
    branch: 'fixes'
    variants:
      gcc-12:
        build_environment: gcc-12
        architectures:
          riscv:
            base_defconfig: 'defconfig'
            extra_configs:
              - 'defconfig+CONFIG_SMP=n'
      clang-16:
        build_environment: clang-16
        architectures:
          riscv:
            base_defconfig: 'defconfig'
            extra_configs:
              - 'defconfig+CONFIG_SMP=n'

  riscv_for-next:
    <<: *riscv-tree
    branch: 'for-next'

  rmk_for-next:
    tree: rmk
    branch: 'for-next'
    variants: *minimal_variants

  rmk_to-build:
    tree: rmk
    branch: 'to-build'
    variants: *minimal_variants

  robh:
    tree: robh
    branch: 'for-kernelci'
    variants: *minimal_variants

  rppt:
    tree: rppt
    branch: 'for-kernelci'
    variants: *medium_variants

  rt-stable_v4.14-rt:
    tree: rt-stable
    branch: 'v4.14-rt'
    variants: *preempt_rt_variants

  rt-stable_v4.14-rt-next:
    tree: rt-stable
    branch: 'v4.14-rt-next'
    variants: *preempt_rt_variants

  rt-stable_v4.19-rt:
    tree: rt-stable
    branch: 'v4.19-rt'
    variants: *preempt_rt_variants

  rt-stable_v4.19-rt-next:
    tree: rt-stable
    branch: 'v4.19-rt-next'
    variants: *preempt_rt_variants

  rt-stable_v5.4-rt:
    tree: rt-stable
    branch: 'v5.4-rt'
    variants: *preempt_rt_variants

  rt-stable_v5.4-rt-next:
    tree: rt-stable
    branch: 'v5.4-rt-next'
    variants: *preempt_rt_variants

  rt-stable_v5.10-rt:
    tree: rt-stable
    branch: 'v5.10-rt'
    variants: *preempt_rt_variants

  rt-stable_v5.10-rt-next:
    tree: rt-stable
    branch: 'v5.10-rt-next'
    variants: *preempt_rt_variants

  rt-stable_v5.15-rt:
    tree: rt-stable
    branch: 'v5.15-rt'
    variants: *preempt_rt_variants

  rt-stable_v5.15-rt-next:
    tree: rt-stable
    branch: 'v5.15-rt-next'
    variants: *preempt_rt_variants

  rt-stable_v6.1-rt:
    tree: rt-stable
    branch: 'v6.1-rt'
    variants: *preempt_rt_variants

  rt-stable_v6.1-rt-next:
    tree: rt-stable
    branch: 'v6.1-rt-next'
    variants: *preempt_rt_variants

  rust-for-linux_rust-next:
    tree: rust-for-linux
    branch: 'rust-next'
    variants:
      rustc-1.75:
        build_environment: rustc-1.75
        fragments: [rust, rust-for-linux-samples, rust-samples, kselftest]
        architectures:
          x86_64:
            base_defconfig: 'x86_64_defconfig+rust'

  samsung:
    tree: samsung
    branch: 'for-next'
    variants: *minimal_variants

  soc_fixes:
    tree: soc
    branch: 'arm/fixes'
    variants: *minimal_variants

  soc_for-next:
    tree: soc
    branch: 'for-next'
    variants: *minimal_variants

  tegra:
    tree: tegra
    branch: 'for-next'
    variants: *minimal_variants

  thermal:
    tree: thermal
    branch: 'testing'
    variants: *minimal_variants

  tip:
    tree: tip
    branch: 'master'
    variants: *minimal_variants

  ulfh:
    tree: ulfh
    branch: 'next'
    variants: *minimal_variants

  vireshk:
    tree: vireshk
    branch: 'for-kernelci'
    variants: *minimal_variants

  weiny2:
    tree: weiny2
    branch: 'kernelci'
    variants: *minimal_variants
