test_plans:

  chromiumosvm-tast-fixed-kernel:
    pattern: 'chromeos/cros-tast-qemu.jinja2'
    filters:
      - blocklist: &kselftest_defconfig_filter
          defconfig: ['kselftest']
      - passlist: &qemu_chromiumos_labs_filter
          lab: ['lab-collabora-staging', 'lab-collabora']
    params:
      job_timeout: '60'
      docker_image: 'kernelci/chromeos-tast'
      rootfs_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-amd64-generic/20231106.0/amd64/'
      fixed_kernel: true

  chromiumosvm-tast-upstream-kernel:
    pattern: 'chromeos/cros-tast-qemu.jinja2'
    filters:
      - blocklist: *kselftest_defconfig_filter
      - passlist:
          lab: ['lab-collabora-staging', 'lab-collabora']
    params:
      job_timeout: '60'
      docker_image: 'kernelci/chromeos-tast'
      rootfs_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-amd64-generic/20231106.0/amd64/'

  cros-baseline: &cros-baseline
    pattern: 'chromeos/cros-baseline.jinja2'
    filters: &cros-filters
      - blocklist: { defconfig: ['kselftest'] }
    params:
      docker_image: 'kernelci/cros-baseline'

  cros-baseline-fixed:
    <<: *cros-baseline
    filters: &cros-filters-fixed
      - blocklist: { defconfig: ['kselftest'] }
    params:
      docker_image: 'kernelci/cros-baseline'
      fixed_kernel: true

  cros-baseline_qemu: &cros-baseline_qemu
    base_name: cros-baseline
    pattern: 'chromeos/cros-baseline.jinja2'
    filters: &cros-qemu-filters
      - blocklist: { defconfig: ['kselftest'] }
      - passlist: { lab: ['lab-collabora-staging', 'lab-collabora'] }
    params: &cros-baseline-qemu-params
      base_template: 'chromeos/cros-boot-qemu.jinja2'
      docker_image: 'kernelci/cros-baseline'

  cros-baseline_qemu-fixed:
    <<: *cros-baseline_qemu
    base_name: cros-baseline-fixed
    filters: &cros-qemu-filters-fixed
      - blocklist: { defconfig: ['kselftest'] }
      - passlist: { lab: ['lab-collabora-staging', 'lab-collabora'] }
    params:
      <<: *cros-baseline-qemu-params
      fixed_kernel: true

  cros-boot: &cros-boot
    pattern: 'chromeos/cros-boot.jinja2'
    filters: *cros-filters

  cros-boot-fixed:
    <<: *cros-boot
    filters: *cros-filters-fixed
    params:
      fixed_kernel: true

  cros-boot_qemu: &cros-boot_qemu
    base_name: cros-boot
    pattern: 'chromeos/cros-boot-qemu.jinja2'
    filters: *cros-qemu-filters

  cros-boot_qemu-fixed:
    <<: *cros-boot_qemu
    base_name: cros-boot-fixed
    filters: *cros-qemu-filters-fixed
    params:
      fixed_kernel: true

  cros-flash:
    pattern: 'chromeos/cros-flash.jinja2'
    params:
      job_timeout: '60'

  cros-tast-base: &cros-tast-base
    pattern: 'chromeos/cros-tast.jinja2'
    filters: *cros-filters
    params: &cros-tast-base-params
      job_timeout: '60'
      docker_image: 'kernelci/cros-tast'

  cros-tast-base_qemu: &cros-tast-base-qemu
    <<: *cros-tast-base
    base_name: cros-tast
    filters: *cros-qemu-filters
    params: &cros-tast-base-qemu-params
      <<: *cros-tast-base-params
      base_template: 'chromeos/cros-boot-qemu.jinja2'

  cros-tast-hardware: &cros-tast-hardware
    <<: *cros-tast-base
    params: &cros-tast-hardware-params
      <<: *cros-tast-base-params
      tests: >
        hardware.DiskErrors
        hardware.SensorAccel
        hardware.SensorIioservice
        hardware.SensorIioserviceHard
        hardware.SensorLight
        hardware.SensorPresence
        hardware.SensorActivity
        graphics.HardwareProbe
        health.ProbeSensorInfo
        health.DiagnosticsRun.*
        health.ProbeAudioHardwareInfo
        health.ProbeAudioInfo
        health.ProbeBacklightInfo
        health.ProbeCPUInfo
        health.ProbeFanInfo
        inputs.PhysicalKeyboardKernelMode
        graphics.KernelConfig
        graphics.KernelMemory

  cros-tast-hardware-fixed:
    <<: *cros-tast-hardware
    params:
      <<: *cros-tast-hardware-params
      fixed_kernel: true

  cros-tast-kernel: &cros-tast-kernel
    <<: *cros-tast-base
    params: &cros-tast-kernel-params
      <<: *cros-tast-base-params
      tests: &cros-tast-kernel-tests >
        kernel.Bloat
        kernel.ConfigVerify.chromeos_kernelci
        kernel.ConfigVerify.chromeos
        kernel.CPUCgroup
        kernel.Cpuidle
        kernel.CryptoAPI
        kernel.CryptoDigest
        kernel.ECDeviceNode
        kernel.HighResTimers
        kernel.Limits
        kernel.PerfCallgraph

  cros-tast-kernel-fixed:
    <<: *cros-tast-kernel
    params:
      <<: *cros-tast-kernel-params
      fixed_kernel: true

  cros-tast-kernel_qemu:
    <<: *cros-tast-base-qemu
    params: 
      <<: *cros-tast-base-qemu-params
      tests: *cros-tast-kernel-tests

  cros-tast-mm-decode: &cros-tast-mm-decode
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-tests >
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_group1_buf
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_group2_buf
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_group3_buf
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_group4_buf
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_level5_0_buf
        video.PlatformDecoding.ffmpeg_vaapi_vp9_0_level5_1_buf
        video.PlatformDecoding.ffmpeg_vaapi_av1
        video.PlatformDecoding.ffmpeg_vaapi_vp8_inter
        video.PlatformDecoding.ffmpeg_vaapi_h264_baseline
        video.PlatformDecoding.ffmpeg_vaapi_h264_main
        video.PlatformDecoding.ffmpeg_vaapi_hevc_main
        video.PlatformDecoding.vaapi_vp9_0_group1_buf
        video.PlatformDecoding.vaapi_vp9_0_group2_buf
        video.PlatformDecoding.vaapi_vp9_0_group3_buf
        video.PlatformDecoding.vaapi_vp9_0_group4_buf
        video.PlatformDecoding.vaapi_vp9_0_level5_0_buf
        video.PlatformDecoding.vaapi_vp9_0_level5_1_buf
        video.ChromeStackDecoder.*
        video.ChromeStackDecoderVerification.*

  cros-tast-mm-decode-fixed:
    <<: *cros-tast-mm-decode
    params:
      <<: *cros-tast-mm-decode-params
      fixed_kernel: true

  cros-tast-mm-decode-v4l2-stateful-h264: &cros-tast-mm-decode-v4l2-stateful-h264
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-h264-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-h264-tests >
        video.PlatformDecoding.v4l2_stateful_h264_*

  cros-tast-mm-decode-v4l2-stateful-hevc: &cros-tast-mm-decode-v4l2-stateful-hevc
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-hevc-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-hevc-tests >
        video.PlatformDecoding.v4l2_stateful_hevc_*

  cros-tast-mm-decode-v4l2-stateful-vp8: &cros-tast-mm-decode-v4l2-stateful-vp8
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp8-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp8-tests >
        video.PlatformDecoding.v4l2_stateful_vp8_*

  cros-tast-mm-decode-v4l2-stateful-vp9-group1: &cros-tast-mm-decode-v4l2-stateful-vp9-group1
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-group1-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-group1-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_group1_*

  cros-tast-mm-decode-v4l2-stateful-vp9-group2: &cros-tast-mm-decode-v4l2-stateful-vp9-group2
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-group2-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-group2-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_group2_*

  cros-tast-mm-decode-v4l2-stateful-vp9-group3: &cros-tast-mm-decode-v4l2-stateful-vp9-group3
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-group3-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-group3-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_group3_*

  cros-tast-mm-decode-v4l2-stateful-vp9-group4: &cros-tast-mm-decode-v4l2-stateful-vp9-group4
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-group4-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-group4-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_group4_*

  cros-tast-mm-decode-v4l2-stateful-vp9-level5: &cros-tast-mm-decode-v4l2-stateful-vp9-level5
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-level5-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-level5-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_level5_*

  cros-tast-mm-decode-v4l2-stateful-vp9-svc: &cros-tast-mm-decode-v4l2-stateful-vp9
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateful-vp9-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateful-vp9-tests >
        video.PlatformDecoding.v4l2_stateful_vp9_0_svc

  cros-tast-mm-decode-v4l2-stateless-av1: &cros-tast-mm-decode-v4l2-stateless-av1
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-av1-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-av1-tests >
        video.PlatformDecoding.v4l2_stateless_av1_*

  cros-tast-mm-decode-v4l2-stateless-h264: &cros-tast-mm-decode-v4l2-stateless-h264
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-h264-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-h264-tests >
        video.PlatformDecoding.v4l2_stateless_h264_*

  cros-tast-mm-decode-v4l2-stateless-hevc: &cros-tast-mm-decode-v4l2-stateless-hevc
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-hevc-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-hevc-tests >
        video.PlatformDecoding.v4l2_stateless_hevc_*

  cros-tast-mm-decode-v4l2-stateless-vp8: &cros-tast-mm-decode-v4l2-stateless-vp8
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp8-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp8-tests >
        video.PlatformDecoding.v4l2_stateless_vp8_*

  cros-tast-mm-decode-v4l2-stateless-vp9-group1: &cros-tast-mm-decode-v4l2-stateless-vp9-group1
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp9-group1-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp9-group1-tests >
        video.PlatformDecoding.v4l2_stateless_vp9_0_group1_*

  cros-tast-mm-decode-v4l2-stateless-vp9-group2: &cros-tast-mm-decode-v4l2-stateless-vp9-group2
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp9-group2-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp9-group2-tests >
        video.PlatformDecoding.v4l2_stateless_vp9_0_group2_*

  cros-tast-mm-decode-v4l2-stateless-vp9-group3: &cros-tast-mm-decode-v4l2-stateless-vp9-group3
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp9-group3-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp9-group3-tests >
          video.PlatformDecoding.v4l2_stateless_vp9_0_group3_*

  cros-tast-mm-decode-v4l2-stateless-vp9-group4: &cros-tast-mm-decode-v4l2-stateless-vp9-group4
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp9-group4-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp9-group4-tests >
          video.PlatformDecoding.v4l2_stateless_vp9_0_group4_*

  cros-tast-mm-decode-v4l2-stateless-vp9-level5: &cros-tast-mm-decode-v4l2-stateless-vp9-level5
    <<: *cros-tast-base
    params: &cros-tast-mm-decode-v4l2-stateless-vp9-level5-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-decode-v4l2-stateless-vp9-level5-tests >
        video.PlatformDecoding.v4l2_stateless_vp9_0_level5_*

  cros-tast-mm-encode: &cros-tast-mm-encode
    <<: *cros-tast-base
    params: &cros-tast-mm-encode-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-encode-tests >
        video.EncodeAccel.h264_1080p_global_vaapi_lock_disabled
        video.EncodeAccel.vp8_1080p_global_vaapi_lock_disabled
        video.EncodeAccel.vp9_1080p_global_vaapi_lock_disabled
        video.EncodeAccelPerf.h264_1080p_global_vaapi_lock_disabled
        video.EncodeAccelPerf.vp8_1080p_global_vaapi_lock_disabled
        video.EncodeAccelPerf.vp9_1080p_global_vaapi_lock_disabled
        video.PlatformEncoding.vaapi_vp8_720
        video.PlatformEncoding.vaapi_vp8_720_meet
        video.PlatformEncoding.vaapi_vp9_720
        video.PlatformEncoding.vaapi_vp9_720_meet
        video.PlatformEncoding.vaapi_h264_720
        video.PlatformEncoding.vaapi_h264_720_meet
        webrtc.MediaRecorderMulti.vp8_vp8_global_vaapi_lock_disabled
        webrtc.MediaRecorderMulti.vp8_h264_global_vaapi_lock_disabled
        webrtc.MediaRecorderMulti.h264_h264_global_vaapi_lock_disabled
        webrtc.RTCPeerConnectionPerf.vp8_hw_multi_vp9_3x3_global_vaapi_lock_disabled
        webrtc.RTCPeerConnectionPerf.vp8_hw_multi_vp9_4x4_global_vaapi_lock_disabled
        webrtc.RTCPeerConnectionPerf.vp9_hw_multi_vp9_3x3_global_vaapi_lock_disabled

  cros-tast-mm-encode-fixed:
    <<: *cros-tast-mm-encode
    params:
      <<: *cros-tast-mm-encode-params
      fixed_kernel: true

  cros-tast-mm-misc: &cros-tast-mm-misc
    <<: *cros-tast-base
    params: &cros-tast-mm-misc-params
      <<: *cros-tast-base-params
      tests: &cros-tast-mm-misc-tests >
        camera.V4L2.certification
        camera.V4L2Compliance
        camera.V4L2.supported_formats
        camera.Suspend
        camera.V4L2
        video.PlatformVAAPIUnittest
        graphics.Clvk.api_tests
        graphics.Clvk.simple_test
        security.GPUSandboxed
        video.ImageProcessor.image_processor_unit_test
        video.MemCheck.av1_hw
        graphics.DRM.atomic_test_overlay_upscaling
        graphics.DRM.atomic_test_plane_alpha
        graphics.DRM.atomic_test_plane_ctm
        graphics.DRM.atomic_test_primary_pageflip
        graphics.DRM.atomic_test_rgba_primary
        graphics.DRM.atomic_test_video_overlay
        graphics.DRM.atomic_test_video_underlay
        graphics.DRM.dmabuf_test
        graphics.DRM.drm_cursor_test
        graphics.DRM.gbm_test
        graphics.DRM.linear_bo_test
        graphics.DRM.mapped_access_perf_test
        graphics.DRM.mmap_test
        graphics.DRM.null_platform_test
        graphics.DRM.swrast_test
        graphics.DRM.vk_glow
        graphics.DRM.yuv_to_rgb_test
        graphics.GLBench


  cros-tast-mm-misc-fixed:
    <<: *cros-tast-mm-misc
    params:
      <<: *cros-tast-mm-misc-params
      fixed_kernel: true

  cros-tast-perf: &cros-tast-perf
    <<: *cros-tast-base
    params: &cros-tast-perf-params
      <<: *cros-tast-base-params
      tests: &cros-tast-perf-tests >
        ui.DesksAnimationPerf
        ui.DragTabInTabletPerf.touch
        ui.OverviewWithExpandedDesksBarPerf
        filemanager.UIPerf.directory_list
        filemanager.UIPerf.list_apps
        settings.DeviceMouseScrollAcceleration

  cros-tast-perf-fixed:
    <<: *cros-tast-perf
    params:
      <<: *cros-tast-perf-params
      fixed_kernel: true

  cros-tast-perf-long-duration:
    <<: *cros-tast-base
    params:
      <<: *cros-tast-base-params
      tests:
        ui.WindowCyclePerf
        ui.WindowResizePerf
        ui.BubbleLauncherAnimationPerf
        ui.DragMaximizedWindowPerf
        ui.DragTabInClamshellPerf
        ui.DragTabInTabletPerf
        filemanager.ZipPerf
        storage.WriteZeroPerf

  cros-tast-perf_qemu:
    <<: *cros-tast-base-qemu
    params: 
      <<: *cros-tast-base-qemu-params
      tests: *cros-tast-perf-tests

  cros-tast-platform: &cros-tast-platform
    <<: *cros-tast-base
    params: &cros-tast-platform-params
      <<: *cros-tast-base-params
      tests: &cros-tast-platform-tests >
        platform.CheckDiskSpace
        platform.CheckProcesses
        platform.CheckTracefsInstances
        platform.CrosDisks
        platform.CrosDisksArchive
        platform.CrosDisksFilesystem
        platform.CrosDisksFormat
        platform.CrosDisksRename
        platform.CrosDisksSSHFS
        platform.CrosID
        platform.DLCService
        platform.DLCServiceCrosDeploy
        platform.DLCServicePreloading
        platform.DMVerity
        platform.DumpVPDLog
        platform.Firewall
        platform.Histograms
        platform.LocalPerfettoTBMTracedProbes
        platform.Memd
        platform.Mtpd
        platform.TPMResponsive
        platform.TPMStatus
        platform.CheckDiskSpace
        platform.CheckProcesses
        platform.DeviceHwid
        platform.SerialNumber
        storage.HealthInfo
        storage.InternalStorage
        storage.LowPowerStateResidence


  cros-tast-platform-fixed:
    <<: *cros-tast-platform
    params:
      <<: *cros-tast-platform-params
      fixed_kernel: true

  cros-tast-platform_qemu:
    <<: *cros-tast-base-qemu
    params:
      <<: *cros-tast-base-qemu-params
      tests: *cros-tast-platform-tests

  cros-tast-power: &cros-tast-power
    <<: *cros-tast-base
    params: &cros-tast-power-params
      <<: *cros-tast-base-params
      tests: >
        power.CheckStatus
        power.UtilCheck
        power.CpufreqConf
        power.TabletModePowerOffMenu.close_menu
        power.TabletModePowerOffMenu.shut_down
        power.TabletModePowerOffMenu.sign_out
        power.SmartDim.flatbuffer
        power.SmartDim
        power.SmartDim.lacros
        typec.Basic

  cros-tast-power-fixed:
    <<: *cros-tast-power
    params:
      <<: *cros-tast-power-params
      fixed_kernel: true

  cros-tast-sound: &cros-tast-sound
    <<: *cros-tast-base
    params: &cros-tast-sound-params
      <<: *cros-tast-base-params
      tests: &cros-tast-sound-tests >
        audio.DevicePlay
        audio.DevicePlay.unstable_platform
        audio.DevicePlay.unstable_model
        audio.UCMSequences.section_device
        audio.UCMSequences.section_modifier
        audio.UCMSequences.section_verb
        audio.ALSAConformance
        audio.CheckingAudioFormats
        audio.CrasFeatures
        audio.CrasPlay
        audio.CrasRecord
        audio.CrasRecordQuality
        audio.DeviceRecord
        audio.AloopLoadedFixture
        audio.BrowserShellAudioToneCheck
        audio.UCMSequences.section_verb
        audio.AloopLoadedFixture.stereo


  cros-tast-sound-fixed:
    <<: *cros-tast-sound
    params:
      <<: *cros-tast-sound-params
      fixed_kernel: true

  cros-tast-ui: &cros-tast-ui
    <<: *cros-tast-base
    params: &cros-tast-ui-params
      <<: *cros-tast-base-params
      tests: &cros-tast-ui-tests >
        ui.DesktopControl
        ui.WindowControl
        ui.HotseatAnimation.shelf_with_navigation_widget
        ui.HotseatAnimation.non_overflow_shelf
        ui.HotseatAnimation.overflow_shelf
        ui.HotseatAnimation.shelf_with_navigation_widget_lacros
        ui.HotseatAnimation.non_overflow_shelf_lacros
        ui.HotseatAnimation.overflow_shelf_lacros

  cros-tast-ui-fixed:
    <<: *cros-tast-ui
    params:
      <<: *cros-tast-ui-params
      fixed_kernel: true

  cros-tast-video: &cros-tast-video
    <<: *cros-tast-base
    params: &cros-tast-video-params
      <<: *cros-tast-base-params
      tests: &cros-tast-video-tests >
        video.ChromeStackDecoder.*

  cros-tast-video-fixed:
    <<: *cros-tast-video
    params:
      <<: *cros-tast-video-params
      fixed_kernel: true

  cros-tast-video_qemu:
    <<: *cros-tast-base-qemu
    params:
      <<: *cros-tast-base-qemu-params
      tests: *cros-tast-video-tests

  v4l2-decoder-conformance-av1_chromeos: &v4l2-decoder-conformance_chromeos
    rootfs: debian_bullseye-gst-fluster_nfs
    pattern: 'v4l2-decoder-conformance/{category}-{method}-{protocol}-{rootfs}-v4l2-decoder-conformance-template.jinja2'
    params: &v4l2-decoder-conformance-params_chromeos
      job_timeout: '30'
      testsuite: 'AV1-TEST-VECTORS'
      decoders:
        - 'GStreamer-AV1-V4L2SL-Gst1.0'
      videodec_parallel_jobs: '1'
      videodec_timeout: 90

  v4l2-decoder-conformance-h264_chromeos:
    <<: *v4l2-decoder-conformance_chromeos
    params:
      <<: *v4l2-decoder-conformance-params_chromeos
      testsuite: 'JVT-AVC_V1'
      decoders:
        - 'GStreamer-H.264-V4L2-Gst1.0'
        - 'GStreamer-H.264-V4L2SL-Gst1.0'

  v4l2-decoder-conformance-h265_chromeos:
    <<: *v4l2-decoder-conformance_chromeos
    params:
      <<: *v4l2-decoder-conformance-params_chromeos
      testsuite: 'JCT-VC-HEVC_V1'
      decoders:
        - 'GStreamer-H.265-V4L2-Gst1.0'
        - 'GStreamer-H.265-V4L2SL-Gst1.0'

  v4l2-decoder-conformance-vp8_chromeos:
    <<: *v4l2-decoder-conformance_chromeos
    params:
      <<: *v4l2-decoder-conformance-params_chromeos
      testsuite: 'VP8-TEST-VECTORS'
      decoders:
        - 'GStreamer-VP8-V4L2-Gst1.0'
        - 'GStreamer-VP8-V4L2SL-Gst1.0'

  v4l2-decoder-conformance-vp9_chromeos:
    <<: *v4l2-decoder-conformance_chromeos
    params:
      <<: *v4l2-decoder-conformance-params_chromeos
      testsuite: 'VP9-TEST-VECTORS'
      decoders:
        - 'GStreamer-VP9-V4L2SL-Gst1.0'

device_types:

  acer-R721T-grunt_chromeos: &chromebook-grunt-type
    base_name: acer-R721T-grunt
    mach: x86
    arch: x86_64
    boot_method: depthcharge
    filters: &stoneyridge-filter
      - passlist: {defconfig: ['chromeos-amd-stoneyridge']}
    params: &chromebook-generic-params
      cros_flash_nfs:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/debian/bookworm-cros-flash/20230915.0/amd64/'
        initrd: 'initrd.cpio.gz'
        initrd_compression: 'gz'
        rootfs: 'full.rootfs.tar.xz'
        rootfs_compression: 'xz'
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/cros-20230815-amd64/clang-14/'
        image: 'kernel/bzImage'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-grunt/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-grunt/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-grunt/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  acer-cb317-1h-c3z6-dedede_chromeos: &chromebook-x86-type
    base_name: acer-cb317-1h-c3z6-dedede
    mach: x86
    arch: x86_64
    boot_method: depthcharge
    filters: &pineview-filter
      - passlist: {defconfig: ['chromeos-intel-pineview']}
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-dedede/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-dedede/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-dedede/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  acer-cbv514-1h-34uz-brya_chromeos:
    <<: *chromebook-x86-type
    base_name: acer-cbv514-1h-34uz-brya
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-brya/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-brya/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-brya/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  acer-chromebox-cxi4-puff_chromeos:
    <<: *chromebook-x86-type
    base_name: acer-chromebox-cxi4-puff
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-puff/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-puff/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-puff/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  acer-cp514-2h-1160g7-volteer_chromeos: &chromebook-volteer-type
    <<: *chromebook-x86-type
    base_name: acer-cp514-2h-1160g7-volteer
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-volteer/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-volteer/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-volteer/20231106.0/amd64/modules.tar.xz'
      block_device: nvme0n1

  acer-cp514-3wh-r0qs-guybrush_chromeos:
    <<: *chromebook-x86-type
    base_name: acer-cp514-3wh-r0qs-guybrush
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-guybrush/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-guybrush/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-guybrush/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  asus-C433TA-AJ0005-rammus_chromeos:
    <<: *chromebook-x86-type
    base_name: asus-C433TA-AJ0005-rammus
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-rammus/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-rammus/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-rammus/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  asus-C436FA-Flip-hatch_chromeos:
    <<: *chromebook-x86-type
    base_name: asus-C436FA-Flip-hatch
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-hatch/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-hatch/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-hatch/20231106.0/amd64/modules.tar.xz'
      block_device: nvme0n1

  asus-C523NA-A20057-coral_chromeos:
    <<: *chromebook-x86-type
    base_name: asus-C523NA-A20057-coral
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-coral/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-coral/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-coral/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  asus-CM1400CXA-dalboz_chromeos:
    <<: *chromebook-x86-type
    base_name: asus-CM1400CXA-dalboz
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  asus-cx9400-volteer_chromeos:
    <<: *chromebook-volteer-type
    base_name: asus-cx9400-volteer

  dell-latitude-3445-7520c-skyrim_chromeos:
    <<: *chromebook-x86-type
    base_name: dell-latitude-3445-7520c-skyrim
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-skyrim/20231208.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-skyrim/20231208.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-skyrim/20231208.0/amd64/modules.tar.xz'
      block_device: detect

  dell-latitude-5300-8145U-arcada_chromeos: &chromebook-sarien-type
    <<: *chromebook-x86-type
    base_name: dell-latitude-5300-8145U-arcada
    filters: *pineview-filter
    params: &chromebook-sarien-params
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-sarien/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-sarien/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-sarien/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  dell-latitude-5400-4305U-sarien_chromeos:
    <<: *chromebook-sarien-type
    base_name: dell-latitude-5400-4305U-sarien
    params:
      <<: *chromebook-sarien-params
      block_device: nvme0n1

  dell-latitude-5400-8665U-sarien_chromeos:
    <<: *chromebook-sarien-type
    base_name: dell-latitude-5400-8665U-sarien

  hp-14-db0003na-grunt_chromeos:
    <<: *chromebook-grunt-type
    base_name: hp-14-db0003na-grunt

  hp-11A-G6-EE-grunt_chromeos:
    <<: *chromebook-grunt-type
    base_name: hp-11A-G6-EE-grunt

  hp-14b-na0052xx-zork_chromeos:
    <<: *chromebook-x86-type
    base_name: hp-14b-na0052xx-zork
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  hp-x360-14-G1-sona_chromeos:
    <<: *chromebook-x86-type
    base_name: hp-x360-14-G1-sona
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-nami/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-nami/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-nami/20231106.0/amd64/modules.tar.xz'
      block_device: detect


  hp-x360-12b-ca0010nr-n4020-octopus_chromeos: &octopus
    <<: *chromebook-x86-type
    base_name: hp-x360-12b-ca0010nr-n4020-octopus
    filters: *pineview-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-octopus/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-octopus/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-octopus/20231106.0/amd64/modules.tar.xz'
      block_device: mmcblk0

  hp-x360-12b-ca0500na-n4000-octopus_chromeos:
    <<: *octopus
    base_name: hp-x360-12b-ca0500na-n4000-octopus

  hp-x360-14a-cb0001xx-zork_chromeos:
    <<: *chromebook-x86-type
    base_name: hp-x360-14a-cb0001xx-zork
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/modules.tar.xz'
      block_device: detect

  lenovo-TPad-C13-Yoga-zork_chromeos:
    <<: *chromebook-x86-type
    base_name: lenovo-TPad-C13-Yoga-zork
    filters: *stoneyridge-filter
    params:
      <<: *chromebook-generic-params
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/bzImage'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-zork/20231106.0/amd64/modules.tar.xz'
      block_device: nvme0n1

  mt8183-kukui-jacuzzi-juniper-sku16_chromeos: &chromebook-arm64-type
    base_name: mt8183-kukui-jacuzzi-juniper-sku16
    mach: mediatek
    class: arm64-dtb
    boot_method: depthcharge
    dtb: 'mediatek/mt8183-kukui-jacuzzi-juniper-sku16.dtb'
    filters: [blocklist: {}]
    params: &chromebook-arm64-params
      cros_flash_nfs:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/debian/bookworm-cros-flash/20230915.0/arm64/'
        initrd: 'initrd.cpio.gz'
        initrd_compression: 'gz'
        rootfs: 'full.rootfs.tar.xz'
        rootfs_compression: 'xz'
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/v6.1-mediatek/'
        image: 'kernel/Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/mediatek/mt8183-kukui-jacuzzi-juniper-sku16.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-jacuzzi/20231201.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-jacuzzi/20231201.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-jacuzzi/20231201.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-jacuzzi/20231201.0/arm64/dtbs/mediatek/mt8183-kukui-jacuzzi-juniper-sku16.dtb'
      block_device: detect

  mt8186-corsola-steelix-sku131072_chromeos:
    <<: *chromebook-arm64-type
    base_name: mt8186-corsola-steelix-sku131072
    dtb: 'mediatek/mt8186-corsola-steelix-sku131072.dtb'
    params:
      <<: *chromebook-arm64-params
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-corsola/20231207.0/arm64/'
        image: 'Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/mediatek/mt8186-corsola-steelix-sku131072.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-corsola/20231207.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-corsola/20231207.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-corsola/20231207.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-corsola/20231207.0/arm64/dtbs/mediatek/mt8186-corsola-steelix-sku131072.dtb'

  mt8192-asurada-spherion-r0_chromeos:
    <<: *chromebook-arm64-type
    base_name: mt8192-asurada-spherion-r0
    mach: mediatek
    dtb: 'mediatek/mt8192-asurada-spherion-r0.dtb'
    filters: [blocklist: {}]
    params:
      <<: *chromebook-arm64-params
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/v6.1-mediatek/'
        image: 'kernel/Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/mediatek/mt8192-asurada-spherion-r0.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-asurada/20231201.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-asurada/20231201.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-asurada/20231201.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-asurada/20231201.0/arm64/dtbs/mediatek/mt8192-asurada-spherion-r0.dtb'
      block_device: detect

  mt8195-cherry-tomato-r2_chromeos:
    <<: *chromebook-arm64-type
    base_name: mt8195-cherry-tomato-r2
    mach: mediatek
    dtb: 'mediatek/mt8195-cherry-tomato-r2.dtb'
    filters: [blocklist: {}]
    params:
      <<: *chromebook-arm64-params
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/v6.1-mediatek/'
        image: 'kernel/Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/mediatek/mt8195-cherry-tomato-r2.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-cherry/20231201.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-cherry/20231201.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-cherry/20231201.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-cherry/20231201.0/arm64/dtbs/mediatek/mt8195-cherry-tomato-r2.dtb'
      block_device: detect

# Test plans temporarily disabled as QEMU build doesnt work
#  qemu_x86_64-uefi-chromeos:
#    base_name: qemu
#    mach: qemu
#    arch: x86_64
#    boot_method: qemu
#    params:
#      bios_url: 'http://storage.kernelci.org/images/uefi/edk2-stable202005/x86_64/OVMF.fd'
#      cros_image:
#        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-amd64-generic/20231106.0/amd64/'
#        image: 'chromiumos_test_image.bin.gz'
#        tast_tarball: 'tast.tgz'
#      reference_kernel:
#        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-amd64-generic/20231106.0/amd64/bzImage'
#        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-amd64-generic/20231106.0/amd64/modules.tar.xz'
#    context:
#      arch: x86_64
#      cpu: 'qemu64'
#      guestfs_interface: 'virtio'
#      extra_options:
#        - '-device pcie-root-port,port=0x10,chassis=1,id=pci.1,bus=pcie.0,multifunction=on,addr=0x2'
#        - '-device pcie-root-port,port=0x15,chassis=6,id=pci.6,bus=pcie.0,addr=0x2.0x5'
#        - '-device qemu-xhci,p2=15,p3=15,id=usb,bus=pci.6,addr=0x0'
#        - '-device usb-storage,bus=usb.0,drive=lavatest2'
#        - '-m 2048'
#        - '-device usb-tablet,id=input0,bus=usb.0,port=2'
#        - '-device pcie-root-port,port=0x11,chassis=2,id=pci.2,bus=pcie.0,addr=0x2.0x1'
#        - '-device virtio-vga,id=video0,virgl=on,max_outputs=1,bus=pcie.0,addr=0x3'
#        - '-device ich9-intel-hda,id=sound0,bus=pcie.0,addr=0x1b'
#        - '-machine pc-q35-5.2,accel=kvm,usb=off,vmport=off,dump-guest-core=off'
#    filters:
#      - passlist: {defconfig: ['chromiumos-x86_64']}

  sc7180-trogdor-kingoftown_chromeos:
    <<: *chromebook-arm64-type
    base_name: sc7180-trogdor-kingoftown
    mach: qcom
    dtb: 'qcom/sc7180-trogdor-kingoftown.dtb'
    filters: &qualcomm-filter
      - passlist: {defconfig: ['chromiumos-qualcomm']}
    params:
      <<: *chromebook-arm64-params
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/v6.1-qualcomm/'
        image: 'kernel/Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/qcom/sc7180-trogdor-kingoftown-r1.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/dtbs/qcom/sc7180-trogdor-kingoftown.dtb'
      block_device: detect

  sc7180-trogdor-lazor-limozeen_chromeos:
    <<: *chromebook-arm64-type
    base_name: sc7180-trogdor-lazor-limozeen
    mach: qcom
    dtb: 'qcom/sc7180-trogdor-lazor-limozeen-nots-r5.dtb'
    filters: *qualcomm-filter
    params:
      <<: *chromebook-arm64-params
      cros_flash_kernel:
        base_url: 'https://storage.chromeos.kernelci.org/images/kernel/v6.1-qualcomm/'
        image: 'kernel/Image'
        modules: 'modules.tar.xz'
        modules_compression: 'xz'
        dtb: 'dtbs/qcom/sc7180-trogdor-lazor-limozeen-nots-r5.dtb'
      cros_image:
        base_url: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/'
        flash_tarball: 'full-cros-flash.tar.gz'
        flash_tarball_compression: 'gz'
        tast_tarball: 'tast.tgz'
      reference_kernel:
        image: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/Image'
        modules: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/modules.tar.xz'
        dtb: 'https://storage.chromeos.kernelci.org/images/rootfs/chromeos/chromiumos-trogdor/20231106.0/arm64/dtbs/qcom/sc7180-trogdor-lazor-limozeen-nots-r5.dtb'
      block_device: detect

test_configs:

  - device_type: hp-11A-G6-EE-grunt_chromeos
    test_plans: &chromebook-test-plans
      - cros-baseline
      - cros-baseline-fixed
      - cros-tast-hardware
      - cros-tast-hardware-fixed
      - cros-tast-kernel
      - cros-tast-kernel-fixed
      - cros-tast-mm-misc
      - cros-tast-mm-misc-fixed
      - cros-tast-perf
      - cros-tast-perf-fixed
      - cros-tast-perf-long-duration
      - cros-tast-platform
      - cros-tast-platform-fixed
      - cros-tast-power
      - cros-tast-power-fixed
      - cros-tast-sound
      - cros-tast-sound-fixed
      - cros-tast-ui
      - cros-tast-ui-fixed
      - cros-tast-video
      - cros-tast-video-fixed

  - device_type: acer-R721T-grunt_chromeos
    test_plans: *chromebook-test-plans

  - device_type: acer-cb317-1h-c3z6-dedede_chromeos
    test_plans: *chromebook-test-plans

  - device_type: acer-cbv514-1h-34uz-brya_chromeos
    test_plans: *chromebook-test-plans

  - device_type: acer-chromebox-cxi4-puff_chromeos
    test_plans: *chromebook-test-plans

  - device_type: acer-cp514-2h-1160g7-volteer_chromeos
    test_plans: *chromebook-test-plans

  - device_type: acer-cp514-3wh-r0qs-guybrush_chromeos
    test_plans: *chromebook-test-plans

  - device_type: asus-C433TA-AJ0005-rammus_chromeos
    test_plans: *chromebook-test-plans

  - device_type: asus-C436FA-Flip-hatch_chromeos
    test_plans: *chromebook-test-plans

  - device_type: asus-C523NA-A20057-coral_chromeos
    test_plans: *chromebook-test-plans

  - device_type: asus-CM1400CXA-dalboz_chromeos
    test_plans: *chromebook-test-plans

  - device_type: asus-cx9400-volteer_chromeos
    test_plans: *chromebook-test-plans

  - device_type: dell-latitude-3445-7520c-skyrim_chromeos
    test_plans: *chromebook-test-plans

  - device_type: dell-latitude-5300-8145U-arcada_chromeos
    test_plans: *chromebook-test-plans

  - device_type: dell-latitude-5400-4305U-sarien_chromeos
    test_plans: *chromebook-test-plans

  - device_type: dell-latitude-5400-8665U-sarien_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-14-db0003na-grunt_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-14b-na0052xx-zork_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-x360-14-G1-sona_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-x360-12b-ca0010nr-n4020-octopus_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-x360-12b-ca0500na-n4000-octopus_chromeos
    test_plans: *chromebook-test-plans

  - device_type: hp-x360-14a-cb0001xx-zork_chromeos
    test_plans: *chromebook-test-plans

  - device_type: lenovo-TPad-C13-Yoga-zork_chromeos
    test_plans: *chromebook-test-plans

  - device_type: mt8183-kukui-jacuzzi-juniper-sku16_chromeos
    filters: &mediatek-filter
      - passlist: {defconfig: ['chromiumos-mediatek']}
    test_plans: &chromebook-arm64-test-plans
      - cros-baseline
      - cros-baseline-fixed
      - cros-tast-hardware
      - cros-tast-hardware-fixed
      - cros-tast-kernel
      - cros-tast-kernel-fixed
      - cros-tast-mm-misc
      - cros-tast-mm-misc-fixed
      - cros-tast-perf
      - cros-tast-perf-fixed
      - cros-tast-perf-long-duration
      - cros-tast-platform
      - cros-tast-platform-fixed
      - cros-tast-power
      - cros-tast-power-fixed
      - cros-tast-sound
      - cros-tast-sound-fixed
      - cros-tast-ui
      - cros-tast-ui-fixed
      - cros-tast-video
      - cros-tast-video-fixed

  - device_type: mt8183-kukui-jacuzzi-juniper-sku16_chromeos
    filters: &collabora-chromeos-kernel-filter
      - passlist: {tree: ['collabora-chromeos-kernel'], branch: ['for-kernelci']}
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8183-kukui-jacuzzi-juniper-sku16_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - v4l2-decoder-conformance-h264_chromeos

  - device_type: mt8183-kukui-jacuzzi-juniper-sku16_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - cros-tast-mm-decode-v4l2-stateless-h264

# Disable this test plan for now as this device can only run with
# the Collabora-maintained kernel due to missing upstream support
#   - device_type: mt8186-corsola-steelix-sku131072_chromeos
#     filters: *mediatek-filter
#     test_plans: *chromebook-arm64-test-plans

  - device_type: mt8186-corsola-steelix-sku131072_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8186-corsola-steelix-sku131072_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - v4l2-decoder-conformance-h264_chromeos
      - v4l2-decoder-conformance-vp8_chromeos
      - v4l2-decoder-conformance-vp9_chromeos

  - device_type: mt8192-asurada-spherion-r0_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - cros-tast-mm-decode
      - cros-tast-mm-decode-v4l2-stateless-h264
      - cros-tast-mm-decode-v4l2-stateless-vp8
      - cros-tast-mm-decode-v4l2-stateless-vp9-group1
      - cros-tast-mm-decode-v4l2-stateless-vp9-group2
      - cros-tast-mm-decode-v4l2-stateless-vp9-group3
      - cros-tast-mm-decode-v4l2-stateless-vp9-group4

  - device_type: mt8192-asurada-spherion-r0_chromeos
    filters: *mediatek-filter
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8192-asurada-spherion-r0_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8192-asurada-spherion-r0_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - v4l2-decoder-conformance-h264_chromeos
      - v4l2-decoder-conformance-vp8_chromeos
      - v4l2-decoder-conformance-vp9_chromeos

# Test plans temporarily disabled as QEMU build doesnt work
#  - device_type: qemu_x86_64-uefi-chromeos
#    test_plans:
#      - cros-baseline_qemu
#      - cros-tast-kernel_qemu
#      - cros-tast-perf_qemu
#      - cros-tast-platform_qemu
#      - cros-tast-video_qemu

  - device_type: mt8195-cherry-tomato-r2_chromeos
    filters: *mediatek-filter
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8195-cherry-tomato-r2_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans: *chromebook-arm64-test-plans

  - device_type: mt8195-cherry-tomato-r2_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - cros-tast-mm-decode
      - cros-tast-mm-decode-v4l2-stateless-av1
      - cros-tast-mm-decode-v4l2-stateless-h264
      - cros-tast-mm-decode-v4l2-stateless-hevc
      - cros-tast-mm-decode-v4l2-stateless-vp8
      - cros-tast-mm-decode-v4l2-stateless-vp9-group1
      - cros-tast-mm-decode-v4l2-stateless-vp9-group2
      - cros-tast-mm-decode-v4l2-stateless-vp9-group3
      - cros-tast-mm-decode-v4l2-stateless-vp9-group4

  - device_type: mt8195-cherry-tomato-r2_chromeos
    filters: *collabora-chromeos-kernel-filter
    test_plans:
      - v4l2-decoder-conformance-av1_chromeos
      - v4l2-decoder-conformance-h264_chromeos
      - v4l2-decoder-conformance-h265_chromeos
      - v4l2-decoder-conformance-vp8_chromeos
      - v4l2-decoder-conformance-vp9_chromeos

  - device_type: sc7180-trogdor-kingoftown_chromeos
    test_plans: *chromebook-arm64-test-plans

  - device_type: sc7180-trogdor-kingoftown_chromeos
    test_plans:
      - cros-tast-mm-decode
      - cros-tast-mm-decode-v4l2-stateful-h264
      - cros-tast-mm-decode-v4l2-stateful-hevc
      - cros-tast-mm-decode-v4l2-stateful-vp8
      - cros-tast-mm-decode-v4l2-stateful-vp9-group1
      - cros-tast-mm-decode-v4l2-stateful-vp9-group2
      - cros-tast-mm-decode-v4l2-stateful-vp9-group3
      - cros-tast-mm-decode-v4l2-stateful-vp9-group4
      - cros-tast-mm-decode-v4l2-stateful-vp9-level5
      - cros-tast-mm-decode-v4l2-stateful-vp9-svc

  - device_type: sc7180-trogdor-lazor-limozeen_chromeos
    test_plans: *chromebook-arm64-test-plans

  - device_type: sc7180-trogdor-lazor-limozeen_chromeos
    test_plans:
      - cros-tast-mm-decode
      - cros-tast-mm-decode-v4l2-stateful-h264
      - cros-tast-mm-decode-v4l2-stateful-hevc
      - cros-tast-mm-decode-v4l2-stateful-vp8
      - cros-tast-mm-decode-v4l2-stateful-vp9-group1
      - cros-tast-mm-decode-v4l2-stateful-vp9-group2
      - cros-tast-mm-decode-v4l2-stateful-vp9-group3
      - cros-tast-mm-decode-v4l2-stateful-vp9-group4
      - cros-tast-mm-decode-v4l2-stateful-vp9-level5
      - cros-tast-mm-decode-v4l2-stateful-vp9-svc
