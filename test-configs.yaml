# See the KernelCI wiki page regarding the format of this file:
# https://github.com/kernelci/kernelci-doc/wiki/Test-configurations


file_system_types:

  buildroot:
    url: 'https://storage.kernelci.org/images/rootfs/buildroot/kci-2019.02-8-gd700ebb99e8f'

    arch_map:
      arm64be: [{arch: arm64, endian: big}]
      armeb:   [{arch: arm,   endian: big}]
      armel:   [{arch: arm}]
      x86:     [{arch: i386}, {arch: x86_64}]
      mipsel:  [{arch: mips}]

  debian:
    url: 'http://storage.kernelci.org/images/rootfs/debian'
    arch_map:
      armhf: [{arch: arm}]
      amd64: [{arch: x86_64}]


file_systems:

  buildroot_ramdisk:
    type: buildroot
    ramdisk: '{arch}/base/rootfs.cpio.gz'

  buildroot_nfs:
    type: buildroot
    nfs: '{arch}/base/rootfs.tar.xz'

  buildroot_baseline_ramdisk:
    type: buildroot
    ramdisk: '{arch}/baseline/rootfs.cpio.gz'

  buildroot_kselftest_ramdisk:
    type: buildroot
    ramdisk: '{arch}/tests/rootfs.cpio.gz'

  debian_buster_ramdisk:
    type: debian
    ramdisk: 'buster/20191115.0/{arch}/rootfs.cpio.gz'

  debian_buster-igt_ramdisk:
    type: debian
    ramdisk: 'buster-igt/20191025.0/{arch}/rootfs.cpio.gz'

  debian_buster-v4l2_ramdisk:
    type: debian
    ramdisk: 'buster-v4l2/20191115.0/{arch}/rootfs.cpio.gz'


test_plan_default_filters:

  - combination: &arch_defconfig_filter
      keys: ['arch', 'defconfig']
      values:
        - ['arm', 'multi_v7_defconfig']
        - ['arm64', 'defconfig']
        - ['i386', 'i386_defconfig']
        - ['x86_64', 'x86_64_defconfig']

  - blacklist: &clang_environment_filter
      build_environment: ['clang']

  - blacklist: &kselftest_defconfig_filter
      defconfig: ['kselftest']

  - blacklist: &kselftest_defconfig_clang_environment_filter
      <<: *kselftest_defconfig_filter
      <<: *clang_environment_filter

test_plans:

  baseline:
    rootfs: buildroot_baseline_ramdisk
    filters:
      - blacklist: *kselftest_defconfig_clang_environment_filter

  baseline_qemu:
    base_name: baseline
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    filters:
      - blacklist: *kselftest_defconfig_clang_environment_filter

  baseline-fastboot:
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-fastboot-baseline-template.jinja2'
    params:
      job_timeout: '50'

  baseline-uefi_arm:
    base_name: baseline-uefi
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    params:
      bios_url: 'https://storage.kernelci.org/images/uefi/111bbcf87621/QEMU_EFI.fd-ARM-RELEASE-111bbcf87621'

  baseline-uefi_arm64:
    base_name: baseline-uefi
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    params:
      bios_url: 'https://storage.kernelci.org/images/uefi/111bbcf87621/QEMU_EFI.fd-AARCH64-RELEASE-111bbcf87621'

  baseline-uefi_x86_64:
    base_name: baseline-uefi
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    params:
      bios_url: 'https://storage.kernelci.org/images/uefi/111bbcf87621/OVMF.fd-X64-RELEASE-111bbcf87621'

  baseline-uefi_i386:
    base_name: baseline-uefi
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    params:
      bios_url: 'https://storage.kernelci.org/images/uefi/111bbcf87621/OVMF.fd-IA32-RELEASE-111bbcf87621'

  baseline-uefi_x86-mixed:
    base_name: baseline-uefi
    rootfs: buildroot_baseline_ramdisk
    pattern: 'baseline/generic-qemu-baseline-template.jinja2'
    params:
      bios_url: 'https://storage.kernelci.org/images/uefi/111bbcf87621/OVMF.fd-IA32X64-RELEASE-111bbcf87621'

  boot:
    rootfs: buildroot_ramdisk
    filters:
      - blacklist: *kselftest_defconfig_clang_environment_filter

  boot-nfs:
    rootfs: buildroot_nfs
    pattern: 'boot-nfs/{category}-{method}-{protocol}-nfs-template.jinja2'
    filters:
      - combination:
          keys: ['arch', 'defconfig']
          values:
            - ['arm', 'exynos_defconfig']
            - ['arm', 'omap2plus_defconfig']
            - ['arm', 'sunxi_defconfig']
            - ['arm', 'hisi_defconfig']
            - ['arm', 'sama5_defconfig']
            - ['arm', 'tegra_defconfig']
            - ['arm', 'mvebu_v5_defconfig']
            - ['arm', 'multi_v5_defconfig']
            - ['arm', 'multi_v7_defconfig']
            - ['arm', 'mvebu_v7_defconfig']
            - ['arm', 'at91_dt_defconfig']
            - ['arm', 'davinci_all_defconfig']
            - ['arm64', 'defconfig']
      - blacklist: *clang_environment_filter

  boot_qemu:
    base_name: boot
    rootfs: buildroot_ramdisk
    pattern: 'boot/generic-qemu-boot-template.jinja2'
    filters:
      - blacklist: *clang_environment_filter

  cros-ec:
    rootfs: debian_buster_ramdisk

  igt-drm-kms:
    rootfs: debian_buster-igt_ramdisk
    pattern: 'igt/{category}-{method}-{protocol}-{rootfs}-igt.jinja2'
    params:
      tests: >
        core_auth
        core_getclient
        core_getstats
        core_getversion
        core_setmaster_vs_auth
        drm_read
        kms_addfb_basic
        kms_atomic
        kms_flip_event_leak
        kms_prop_blob
        kms_setmode kms_vblank

  kselftest:
    rootfs: buildroot_kselftest_ramdisk
    filters:
      - whitelist: {defconfig: ['kselftest']}

  simple:
    rootfs: debian_buster_ramdisk

  simple_qemu:
    base_name: simple
    rootfs: debian_buster_ramdisk
    pattern: 'simple/generic-qemu-simple-template.jinja2'

  sleep:
    rootfs: debian_buster_ramdisk

  usb:
    rootfs: debian_buster_ramdisk

  v4l2-compliance-uvc:
    rootfs: debian_buster-v4l2_ramdisk
    # FIXME - this is not very sustainable, improve template naming scheme
    pattern: 'v4l2-compliance/{category}-{method}-{protocol}-{rootfs}-v4l2-compliance-template.jinja2'
    params: {v4l2_driver: "uvcvideo"}

  v4l2-compliance-vivid:
    rootfs: debian_buster-v4l2_ramdisk
    pattern: 'v4l2-compliance/generic-qemu-v4l2-compliance-template.jinja2'
    params: {v4l2_driver: "vivid"}
    filters:
      - whitelist:
          defconfig:
            - 'defconfig+virtualvideo'
            - 'multi_v7_defconfig+virtualvideo'


device_default_filters:

  - blacklist: &allmodconfig_filter
      defconfig: ['allmodconfig']


device_types:

  alpine-db:
    mach: alpine
    class: arm-dtb
    boot_method: uboot

  am57xx-beagle-x15:
    mach: omap2
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      # This board could boot v4.* if CONFIG_SERIAL_8250_OMAP is set. It was
      # added to multi_v7_defconfig as of 5.0.
      - blacklist: {kernel: ['v3.', 'v4.']}

  apq8016-sbc:
    mach: qcom
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'defconfig+CONFIG_KASAN=y'

  ar9331-dpt-module:
    mach: ar9331
    class: mips-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  armada-370-db:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v3.']}

  armada-370-rd:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - combination:
          keys: ['kernel', 'defconfig']
          values:
            - ['v4.0', 'multi_v7_defconfig']
            - ['v4.1', 'multi_v7_defconfig']
            - ['v4.2', 'multi_v7_defconfig']
            - ['v4.3', 'multi_v7_defconfig']
      - blacklist: {kernel: ['v3.']}

  armada-375-db:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-385-db-ap:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-388-clearfog:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_SMP=n']}

  armada-388-gp:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-398-db:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-3720-db:
    mach: mvebu
    class: arm64-dtb
    boot_method: uboot

  armada-7040-db:
    mach: mvebu
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v4.6']}

  armada-8040-db:
    mach: mvebu
    class: arm64-dtb
    boot_method: uboot

  armada-xp-db:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-xp-gp:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  armada-xp-linksys-mamba:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_SMP=n']}

  armada-xp-openblocks-ax3-4:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_SMP=n']}

  arndale:
    mach: exynos
    class: arm-dtb
    boot_method: uboot
    dtb: 'exynos5250-arndale.dtb'
    flags: ['fastboot']
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_SMP=n']}

  at91-sama5d2-xplained:
    mach: at91
    class: arm-dtb
    boot_method: uboot

  at91-sama5d4-xplained:
    mach: at91
    class: arm-dtb
    boot_method: uboot

  bcm2836-rpi-2-b:
    mach: broadcom
    class: arm-dtb
    boot_method: uboot

  bcm2837-rpi-3-b:
    mach: broadcom
    class: arm64-dtb
    boot_method: uboot
    context: {console_device: 'ttyS1', test_character_delay: 10}
    filters:
      - blacklist:
          defconfig: ['allnoconfig', 'allmodconfig']
          kernel: ['v3.', '4.4-', '4.9-', 'v4.13']

  bcm2837-rpi-3-b-32:
    mach: broadcom
    class: arm-dtb
    boot_method: uboot
    dtb: 'bcm2837-rpi-3-b.dtb'
    context: {console_device: 'ttyS1', test_character_delay: 10}
    filters:
      - whitelist: {defconfig: ['bcm2835_defconfig']}
      - blacklist: {kernel: ['v3.', '4.4-', '4.9-', 'v4.13']}

  beaglebone-black:
    mach: omap2
    class: arm-dtb
    boot_method: uboot
    dtb: 'am335x-boneblack.dtb'
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {lab: ['lab-baylibre']}

  beagle-xm:
    mach: omap2
    class: arm-dtb
    boot_method: uboot
    dtb: 'omap3-beagle-xm.dtb'
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v3.14']}

  cubietruck:
    mach: allwinner
    class: arm-dtb
    dtb: "sun7i-a20-cubietruck.dtb"
    boot_method: uboot

  d03:
    mach: hisilicon
    class: arm64-dtb
    boot_method: grub
    dtb: 'hisilicon/hip06-d03.dtb'
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  da850-lcdk:
    mach: davinci
    class: arm-dtb
    boot_method: uboot

  dra7-evm:
    mach: omap2
    class: arm-dtb
    boot_method: uboot

  dove-cubox:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  hi6220-hikey:
    mach: hisilicon
    class: arm64-dtb
    boot_method: uboot

  hifive-unleashed-a00:
    mach: sifive
    class: riscv-dtb
    boot_method: uboot
    filters:
    # no console in tinyconfig
      - blacklist:
          defconfig: ['tinyconfig']
          kernel: ['v4.', 'v5.1', 'v5.2']

  hsdk:
    mach: arc
    class: arc-dtb
    boot_method: uboot
    filters:
      - blacklist:
          kernel: ['v4.14']

  hip07-d05:
    mach: hisilicon
    class: arm64-dtb
    boot_method: grub
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  imx23-olinuxino:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  imx27-phytec-phycard-s-rdk:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  imx28-duckbill:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  imx53-qsrb:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist:
          defconfig:
            - 'imx_v4_v5_defconfig'
            - 'multi_v5_defconfig'
            - 'allmodconfig'

  imx6dl-riotboard:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist:
          defconfig:
            - 'imx_v4_v5_defconfig'
            - 'multi_v5_defconfig'
            - 'allmodconfig'

  imx6q-nitrogen6x:
    mach: imx
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist:
          defconfig:
            - 'imx_v4_v5_defconfig'
            - 'multi_v5_defconfig'
            - 'allmodconfig'

  imx6ul-pico-hobbit:
    mach: imx
    class: arm-dtb
    boot_method: barebox
    flags: ['fastboot']
    filters:
      - blacklist:
          defconfig:
            - 'imx_v4_v5_defconfig'
            - 'multi_v5_defconfig'
            - 'allmodconfig'

  imx6q-sabrelite:
    mach: imx
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist:
          defconfig:
            - 'imx_v4_v5_defconfig'
            - 'imx_v6_v7_defconfig'
            - 'multi_v5_defconfig'
            - 'allmodconfig'
            - 'multi_v7_defconfig+kselftest'
          kernel: ['v3.18']

  imx8mn-ddr4-evk:
    mach: freescale
    class: arm64-dtb
    boot_method: uboot

  jetson-tk1:
    mach: tegra
    class: arm-dtb
    boot_method: uboot
    flags: ['lpae']
    dtb: 'tegra124-jetson-tk1.dtb'
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+kselftest']}

  kirkwood-db-88f6282:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
        # To be removed once NFS is working with multi_v5_defconfig
      - blacklist: {defconfig: ['allmodconfig', 'multi_v5_defconfig']}
      - blacklist: {kernel: ['v3.']}

  kirkwood-openblocks_a7:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot
    filters:
        # To be removed once NFS is working with multi_v5_defconfig
      - blacklist: {defconfig: ['allmodconfig', 'multi_v5_defconfig']}
      - blacklist: {kernel: ['v3.']}

  r8a7796-m3ulcb:
    mach: renesas
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson8b-odroidc1:
    mach: meson
    class: arm-dtb
    boot_method: uboot

  meson-g12a-sei510:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}
    flags: ['fastboot']
    params:
      kernel_addr: '0x01080000'
      dtb_addr: '0x1000000'
      ramdisk_addr: '0x6000000'
      cmdline: '"console=ttyAML0,115200 consoleblank=0 earlycon"'

  meson-g12a-u200:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-g12a-x96-max:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['fastboot']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-g12b-odroid-n2:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-g12b-a311d-khadas-vim3:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxbb-nanopi-k2:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}
    flags: ['big_endian']

  meson-gxbb-odroidc2:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian', 'fastboot']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxbb-p200:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxl-s805x-libretech-ac:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxl-s805x-p241:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxl-s905d-p230:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxl-s905x-libretech-cc:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxl-s905x-khadas-vim:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxm-khadas-vim2:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  meson-gxm-q200:
    mach: amlogic
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  minnowboard-turbot-E3826:
    mach: x86
    arch: x86_64
    boot_method: grub
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'tinyconfig'
            - 'kvm_guest.config'

  mustang:
    mach: apm
    class: arm64-dtb
    boot_method: uboot
    dtb: 'apm/apm-mustang.dtb'
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'defconfig+CONFIG_RAMDOMIZE_BASE=y'
          kernel: ['v3.']

  odroid-x2:
    mach: exynos
    class: arm-dtb
    boot_method: uboot
    dtb: 'exynos4412-odroidx2.dtb'

  odroid-xu3:
    mach: exynos
    class: arm-dtb
    boot_method: uboot
    dtb: 'exynos5422-odroidxu3.dtb'
    flags: ['lpae']

  orion5x-rd88f5182-nas:
    mach: mvebu
    class: arm-dtb
    boot_method: uboot

  ox820-cloudengines-pogoplug-series-3:
    mach: oxnas
    class: arm-dtb
    boot_method: uboot

  panda:
    mach: omap2
    class: arm-dtb
    boot_method: uboot
    dtb: 'omap4-panda.dtb'
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'multi_v7_defconfig+CONFIG_PROVE_LOCKING=y'
            - 'multi_v7_defconfig+kselftest'

  panda-es:
    mach: omap2
    class: arm-dtb
    boot_method: uboot
    dtb: 'omap4-panda-es.dtb'

  peach-pi:
    mach: exynos
    class: arm-dtb
    boot_method: uboot
    dtb: 'exynos5800-peach-pi.dtb'
    flags: ['lpae']
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v3.']}

  qcom-qdf2400:
    mach: qcom
    arch: arm64
    boot_method: grub
    filters:
      - whitelist: {defconfig: ['defconfig']}
      - blacklist: {kernel: ['v3.']}

  qemu_arm-virt-gicv2:
    base_name: qemu
    mach: qemu
    arch: arm
    boot_method: qemu
    context:
      arch: arm
      cpu: 'cortex-a15'
      guestfs_interface: 'virtio'
      machine: 'virt,gic-version=2'
    filters:
      - whitelist: {defconfig: ['multi_v7_defconfig']}

  qemu_arm-virt-gicv3:
    base_name: qemu
    mach: qemu
    arch: arm
    boot_method: qemu
    context:
      arch: arm
      cpu: 'cortex-a15'
      guestfs_interface: 'virtio'
      machine: 'virt,gic-version=3'
    filters:
      - whitelist: {defconfig: ['multi_v7_defconfig']}

  qemu_arm64-virt-gicv2:
    base_name: qemu
    mach: qemu
    arch: arm64
    boot_method: qemu
    context:
      arch: arm64
      cpu: 'cortex-a57'
      guestfs_interface: 'virtio'
      machine: 'virt,gic-version=2'
    filters:
      - whitelist: {defconfig: ['defconfig']}

  qemu_arm64-virt-gicv3:
    base_name: qemu
    mach: qemu
    arch: arm64
    boot_method: qemu
    context:
      arch: arm64
      cpu: 'cortex-a57'
      guestfs_interface: 'virtio'
      machine: 'virt,gic-version=3'
    filters:
      - whitelist: {defconfig: ['defconfig']}

  qemu_i386:
    base_name: qemu
    mach: qemu
    arch: i386
    boot_method: qemu
    context:
      arch: i386
      cpu: 'qemu32'
      guestfs_interface: 'virtio'
    filters:
      - whitelist: {defconfig: ['i386_defconfig']}

  qemu_x86_64:
    base_name: qemu
    mach: qemu
    arch: x86_64
    boot_method: qemu
    context:
      arch: x86_64
      cpu: 'qemu64'
      guestfs_interface: 'virtio'
    filters:
      - whitelist: {defconfig: ['defconfig']}

  r8a7791-porter:
    mach: renesas
    class: arm-dtb
    boot_method: uboot

  rk3399-gru-kevin:
    mach: rockchip
    class: arm64-dtb
    boot_method: depthcharge

  rk3399-puma-haikou:
    mach: rockchip
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v3.', 'v4.4', 'v4.9']}

  rk3288-rock2-square:
    mach: rockchip
    class: arm-dtb
    boot_method: uboot
    flags: ['lpae', 'fastboot']

  rk3328-rock64:
    mach: rockchip
    class: arm64-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {kernel: ['v3.', 'v4.4', 'v4.9']}

  rk3288-veyron-jaq:
    mach: rockchip
    class: arm-dtb
    boot_method: depthcharge
    flags: ['lpae']

  r8a7795-salvator-x:
    mach: renesas
    class: arm64-dtb
    boot_method: uboot
    flags: ['big_endian']
    filters:
      - blacklist: {defconfig: ['allnoconfig', 'allmodconfig']}

  sun8i-a33-sinlinx-sina33:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  socfpga-cyclone5-socrates:
    mach: socfpga
    class: arm-dtb
    boot_method: barebox
    filters:
      - blacklist: *allmodconfig_filter

  snow:
    mach: exynos
    class: arm-dtb
    boot_method: uboot
    dtb: 'exynos5250-snow.dtb'
    flags: ['fastboot']
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_SMP=n']}

  sun4i-a10-olinuxino-lime:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun50i-a64-bananapi-m64:
    mach: allwinner
    class: arm64-dtb
    boot_method: uboot

  sun50i-h5-libretech-all-h3-cc:
    mach: allwinner
    class: arm64-dtb
    boot_method: uboot

  sun50i-h6-orangepi-one-plus:
    mach: allwinner
    class: arm64-dtb
    boot_method: uboot

  sun50i-h6-pine-h64:
    mach: allwinner
    class: arm64-dtb
    boot_method: uboot

  sun5i-a13-olinuxino-micro:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun5i-gr8-chip:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun5i-gr8-chip-pro:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+CONFIG_LKDTM=n']}

  sun7i-a20-cubieboard2:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun7i-a20-olinuxino-lime2:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-a23-evb:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-a33-olinuxino:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-a83t-allwinner-h8homlet-v2:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-a83t-bananapi-m3:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-h2-plus-orangepi-r1:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-h2-plus-orangepi-zero:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-h2-plus-libretech-all-h3-cc:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-h3-libretech-all-h3-cc:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  sun8i-h3-orangepi-pc:
    mach: allwinner
    class: arm-dtb
    boot_method: uboot

  synquacer-acpi:
    mach: socionext
    arch: arm64
    boot_method: grub
    filters:
      - whitelist: {defconfig: ['defconfig']}
      - blacklist: {kernel: ['v3.', 'v4.4']}

  synquacer-dtb:
    mach: socionext
    arch: arm64
    boot_method: grub
    filters:
      - whitelist: {defconfig: ['defconfig']}
      - blacklist: {kernel: ['v3.']}

  tegra124-nyan-big:
    mach: tegra
    class: arm-dtb
    boot_method: depthcharge
    flags: ['lpae']

  x86-atom330:
    mach: x86
    arch: x86
    boot_method: ipxe
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'tinyconfig'
            - 'kvm_guest.config'

  x86-celeron:
    mach: x86
    arch: i386
    boot_method: ipxe
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'x86_64_defconfig'
            - 'tinyconfig'
            - 'kvm_guest.config'

  x86-pentium4:
    mach: x86
    arch: i386
    boot_method: grub
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'x86_64_defconfig'
            - 'tinyconfig'
            - 'kvm_guest.config'

  x86-x5-z8350:
    mach: x86
    arch: x86_64
    boot_method: grub
    filters:
      - blacklist:
          defconfig:
            - 'allmodconfig'
            - 'allnoconfig'
            - 'tinyconfig'
            - 'kvm_guest.config'

  zynq-zc702:
    mach: zynq
    class: arm-dtb
    boot_method: uboot
    filters:
      - blacklist: *allmodconfig_filter
      - blacklist: {defconfig: ['multi_v7_defconfig+linaro-base+distribution']}


test_configs:

  - device_type: alpine-db
    test_plans:
      - baseline
      - boot

  - device_type: am57xx-beagle-x15
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - simple
      - sleep

  - device_type: apq8016-sbc
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: ar9331-dpt-module
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: armada-370-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-370-rd
    test_plans:
      - baseline
      - boot

  - device_type: armada-375-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-385-db-ap
    test_plans:
      - baseline
      - boot

  - device_type: armada-388-clearfog
    test_plans:
      - baseline
      - boot

  - device_type: armada-388-gp
    test_plans:
      - baseline
      - boot

  - device_type: armada-398-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-3720-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-7040-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-8040-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-xp-db
    test_plans:
      - baseline
      - boot

  - device_type: armada-xp-gp
    test_plans:
      - baseline
      - boot-nfs

  - device_type: armada-xp-linksys-mamba
    test_plans:
      - baseline
      - boot

  - device_type: armada-xp-openblocks-ax3-4
    test_plans:
      - baseline
      - boot

  - device_type: arndale
    test_plans: [boot, kselftest]

  - device_type: at91-sama5d2-xplained
    test_plans:
      - baseline
      - boot

  - device_type: at91-sama5d4-xplained
    test_plans:
      - baseline
      - boot

  - device_type: bcm2836-rpi-2-b
    test_plans:
      - baseline
      - boot
      - sleep
      - usb

  - device_type: bcm2837-rpi-3-b
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple
      - usb

  - device_type: bcm2837-rpi-3-b-32
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: beaglebone-black
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: beagle-xm
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: cubietruck
    test_plans:
      - baseline
      - boot
      - boot-nfs

  - device_type: d03
    test_plans:
      - baseline
      - boot

  - device_type: da850-lcdk
    test_plans:
      - baseline
      - boot

  - device_type: dove-cubox
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: dra7-evm
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: hi6220-hikey
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: hip07-d05
    test_plans:
      - baseline
      - boot
      - boot-nfs

  - device_type: hifive-unleashed-a00
    test_plans:
      - baseline
      - boot

  - device_type: hsdk
    test_plans:
      - baseline
      - boot

  - device_type: imx23-olinuxino
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx27-phytec-phycard-s-rdk
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx28-duckbill
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx53-qsrb
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx6dl-riotboard
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx6q-nitrogen6x
    test_plans:
      - baseline
      - boot

  - device_type: imx6ul-pico-hobbit
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: imx6q-sabrelite
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep
      - usb

  - device_type: imx8mn-ddr4-evk
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest

  - device_type: jetson-tk1
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest

  - device_type: kirkwood-db-88f6282
    test_plans:
      - baseline
      - boot-nfs

  - device_type: kirkwood-openblocks_a7
    test_plans:
      - baseline
      - boot
      - boot-nfs

  - device_type: meson8b-odroidc1
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: meson-g12a-sei510
    test_plans:
      - baseline
      - baseline-fastboot
      - boot
      - simple

  - device_type: meson-g12a-u200
    test_plans:
      - baseline
      - boot
      - simple

  - device_type: meson-g12a-x96-max
    test_plans:
      - baseline
      - boot
      - simple

  - device_type: meson-g12b-odroid-n2
    test_plans:
      - baseline
      - boot
      - simple

  - device_type: meson-g12b-a311d-khadas-vim3
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: meson-gxbb-nanopi-k2
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxbb-odroidc2
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: meson-gxbb-p200
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: meson-gxl-s805x-libretech-ac
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxl-s905d-p230
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxl-s805x-p241
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxl-s905x-khadas-vim
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxl-s905x-libretech-cc
    test_plans:
      - baseline
      - boot
      - kselftest
      - simple

  - device_type: meson-gxm-khadas-vim2
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: meson-gxm-q200
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: minnowboard-turbot-E3826
    test_plans:
      - baseline
      - boot
      - simple

  - device_type: mustang
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest

  - device_type: odroid-x2
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest

  - device_type: odroid-xu3
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - igt-drm-kms
      - kselftest
      - sleep
      - usb

  - device_type: orion5x-rd88f5182-nas
    test_plans:
      - baseline
      - boot-nfs

  - device_type: ox820-cloudengines-pogoplug-series-3
    test_plans:
      - baseline
      - boot
      - boot-nfs

  - device_type: panda
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: panda-es
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: peach-pi
    test_plans:
      - baseline
      - boot
      - cros-ec
      - kselftest
      - sleep
      - usb

  - device_type: qcom-qdf2400
    test_plans:
      - baseline
      - boot

  - device_type: qemu_arm-virt-gicv2
    test_plans:
      - baseline_qemu
      - baseline-uefi_arm
      - boot_qemu

  - device_type: qemu_arm-virt-gicv3
    test_plans:
      - baseline_qemu
      - baseline-uefi_arm
      - boot_qemu
      - simple_qemu
      - v4l2-compliance-vivid

  - device_type: qemu_arm64-virt-gicv2
    test_plans:
      - baseline_qemu
      - baseline-uefi_arm64
      - boot_qemu

  - device_type: qemu_arm64-virt-gicv3
    test_plans:
      - baseline_qemu
      - baseline-uefi_arm64
      - boot_qemu
      - simple_qemu
      - v4l2-compliance-vivid

  - device_type: qemu_i386
    test_plans:
      - baseline_qemu
      - baseline-uefi_i386
      - boot_qemu
      - simple_qemu

  - device_type: qemu_x86_64
    test_plans:
      - baseline_qemu
      - baseline-uefi_x86_64
      - baseline-uefi_x86-mixed
      - boot_qemu
      - simple_qemu
      - v4l2-compliance-vivid

  - device_type: r8a7791-porter
    test_plans:
      - baseline
      - boot

  - device_type: r8a7795-salvator-x
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: r8a7796-m3ulcb
    test_plans:
      - baseline
      - boot
      - simple
      - usb

  - device_type: rk3399-gru-kevin
    test_plans:
      - baseline
      - boot
      - cros-ec
      - sleep
      - v4l2-compliance-uvc

  - device_type: rk3399-gru-kevin
    test_plans: [igt-drm-kms]
    filters:
      - blacklist: {kernel: ['v3.', 'v4.4', 'v4.9', 'v4.14']}

  - device_type: rk3399-puma-haikou
    test_plans:
      - baseline
      - boot
      - kselftest

  - device_type: rk3288-rock2-square
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep
      - usb

  - device_type: rk3328-rock64
    test_plans:
      - baseline
      - boot

  - device_type: rk3288-veyron-jaq
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - cros-ec
      - igt-drm-kms
      - sleep
      - usb
      - v4l2-compliance-uvc

  - device_type: socfpga-cyclone5-socrates
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - sleep

  - device_type: snow
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest

  - device_type: sun4i-a10-olinuxino-lime
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: sun50i-a64-bananapi-m64
    test_plans:
      - baseline
      - boot

  - device_type: sun50i-h5-libretech-all-h3-cc
    test_plans:
      - baseline
      - boot

  - device_type: sun50i-h6-orangepi-one-plus
    test_plans:
      - baseline
      - boot

  - device_type: sun50i-h6-pine-h64
    test_plans:
      - baseline
      - boot

  - device_type: sun5i-a13-olinuxino-micro
    test_plans:
      - baseline
      - boot

  - device_type: sun5i-gr8-chip
    test_plans:
      - baseline
      - boot

  - device_type: sun5i-gr8-chip-pro
    test_plans:
      - baseline
      - boot

  - device_type: sun7i-a20-cubieboard2
    test_plans:
      - baseline
      - boot

  - device_type: sun7i-a20-olinuxino-lime2
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: sun8i-a23-evb
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-a33-sinlinx-sina33
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-a33-olinuxino
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-a83t-bananapi-m3
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-a83t-allwinner-h8homlet-v2
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-h2-plus-orangepi-zero
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-h2-plus-orangepi-r1
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-h2-plus-libretech-all-h3-cc
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-h3-libretech-all-h3-cc
    test_plans:
      - baseline
      - boot

  - device_type: sun8i-h3-orangepi-pc
    test_plans:
      - baseline
      - boot

  - device_type: synquacer-acpi
    test_plans:
      - baseline
      - boot

  - device_type: synquacer-dtb
    test_plans:
      - baseline
      - boot

  - device_type: tegra124-nyan-big
    test_plans:
      - baseline
      - boot
      - cros-ec
      - igt-drm-kms
      - sleep
      - usb

  - device_type: x86-atom330
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - kselftest
      - simple

  - device_type: x86-celeron
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - simple

  - device_type: x86-pentium4
    test_plans:
      - baseline
      - boot
      - boot-nfs
      - simple

  - device_type: x86-x5-z8350
    test_plans:
      - baseline
      - boot
      - boot-nfs

  - device_type: zynq-zc702
    test_plans:
      - baseline
      - boot
